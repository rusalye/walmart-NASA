"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45527],{784619:function(e,t,a){a.d(t,{kT:function(){return $},Fq:function(){return x},oL:function(){return _}});var n=a(355893),o=a(444714),d=a(262430),i=a(890003),s=a(585347),l=a(700696),r=a(512894),p=a(969538),u=a(496002);const m={type:"query",name:"AdV2DisplayDSP",query:"query AdV2DisplayDSP( $platform:Platform! $pageId:String! $pageType:PageType! $tenant:String! $moduleType:ModuleType! $pageContext:PageContextIn $locationContext:LocationContextIn $moduleConfigs:JSON $adsContext:AdsContextIn $adRequestComposite:AdRequestCompositeIn ){adV2( platform:$platform pageId:$pageId pageType:$pageType tenant:$tenant moduleType:$moduleType locationContext:$locationContext pageContext:$pageContext moduleConfigs:$moduleConfigs adsContext:$adsContext adRequestComposite:$adRequestComposite ){status adContent{type data{__typename...AdDataDisplayAdFragment __typename...AdDataDisplayAdDSPFragment}}}}fragment AdDataDisplayAdDSPFragment on AdData{...on MultiImpDspAd{ads{assets eventTrackers link metaData templateId variantId availableVariantIds}}...on DisplayAdDSP{assets eventTrackers link metaData templateId variantId availableVariantIds}}fragment AdDataDisplayAdFragment on AdData{...on DisplayAd{json status}}",hash:"381339d49b830bbe7409cbc35dcf1df3bf775700f84959d7a7706f1afc03c4f1",disablePersistedQuery:"true"},c={type:"query",name:"AdV2Display",query:"query AdV2Display( $platform:Platform! $pageId:String! $pageType:PageType! $tenant:String! $moduleType:ModuleType! $pageContext:PageContextIn $locationContext:LocationContextIn $moduleConfigs:JSON $adsContext:AdsContextIn $adRequestComposite:AdRequestCompositeIn ){adV2( platform:$platform pageId:$pageId pageType:$pageType tenant:$tenant moduleType:$moduleType locationContext:$locationContext pageContext:$pageContext moduleConfigs:$moduleConfigs adsContext:$adsContext adRequestComposite:$adRequestComposite ){status adContent{type data{__typename...AdDataDisplayAdFragment}}}}fragment AdDataDisplayAdFragment on AdData{...on DisplayAd{json status}}",hash:"03eccd7f171135a735b1883be162c0e8e0699da6bf7498859932a35851c83eef",disablePersistedQuery:"true"},y={type:"query",name:"AdV2",query:"query AdV2( $platform:Platform! $pageId:String! $pageType:PageType! $tenant:String! $moduleType:ModuleType! $pageContext:PageContextIn $locationContext:LocationContextIn $moduleConfigs:JSON $adsContext:AdsContextIn $adRequestComposite:AdRequestCompositeIn $enableRxDrugScheduleModal:Boolean = false $enableAdsPromoData:Boolean = false $enableSignInToSeePrice:Boolean = false $enableItemLimits:Boolean = false $fetchSBAV1:Boolean = false ){adV2( platform:$platform pageId:$pageId pageType:$pageType tenant:$tenant moduleType:$moduleType locationContext:$locationContext pageContext:$pageContext moduleConfigs:$moduleConfigs adsContext:$adsContext adRequestComposite:$adRequestComposite ){status adContent{type model title displayTitle qc data @skip(if:$fetchSBAV1){__typename...AdDataDisplayAdFragment __typename...AdDataSponsoredProductsFragment __typename...AdDataSponsoredVideoFragment}dataV1 @include(if:$fetchSBAV1){__typename...AdDataDisplayAdFragment __typename...AdDataSponsoredProductsFragment __typename...AdDataSponsoredVideoFragment}}}}fragment AdDataDisplayAdFragment on AdData{...on DisplayAd{json status}}fragment AdDataSponsoredProductsFragment on AdData{...on SponsoredProducts{adUuid adExpInfo moduleInfo products{...ProductFragment}}}fragment ProductFragment on Product{usItemId offerId specialCtaType @include(if:$enableSignInToSeePrice) orderMinLimit @include(if:$enableItemLimits) orderLimit @include(if:$enableItemLimits) badges{flags{__typename...on BaseBadge{id text key query type styleId}...on PreviouslyPurchasedBadge{id text key lastBoughtOn numBought criteria{name value}}}labels{__typename...on BaseBadge{id text key}...on PreviouslyPurchasedBadge{id text key lastBoughtOn numBought}}tags{__typename...on BaseBadge{id text key}}groups{__typename name members{...on BadgeGroupMember{__typename id key memberType rank slaText styleId text type}...on CompositeGroupMember{__typename join memberType styleId suffix members{__typename id key memberType rank slaText styleId text type}}}}groupsV2{name flow pos members{memType memId memStyleId fbMemStyleId content{type value styleId fbStyleId contDesc url actionId}}}}priceInfo{priceDisplayCodes{rollback reducedPrice eligibleForAssociateDiscount clearance strikethrough submapType priceDisplayCondition unitOfMeasure pricePerUnitUom}currentPrice{price priceString priceDisplay}wasPrice{price priceString}listPrice{price priceString}priceRange{minPrice maxPrice priceString}unitPrice{price priceString}savingsAmount{priceString}comparisonPrice{priceString}subscriptionPrice{priceString subscriptionString price minPrice maxPrice intervalFrequency duration percentageRate durationUOM interestUOM downPaymentString}wPlusEarlyAccessPrice{memberPrice{price priceString priceDisplay}savings{amount priceString}eventStartTime eventStartTimeDisplay}}preOrder{streetDate streetDateDisplayable streetDateType isPreOrder preOrderMessage preOrderStreetDateMessage}annualEventV2 earlyAccessEvent isEarlyAccessItem eventAttributes{priceFlip specialBuy}snapEligible showOptions promoData @include(if:$enableAdsPromoData){type templateData{priceString imageUrl}}sponsoredProduct{spQs clickBeacon spTags}canonicalUrl conditionV2{code groupCode}numberOfReviews averageRating availabilityStatus imageInfo{thumbnailUrl allImages{id url}}name fulfillmentBadge classType type showAtc brand sellerId sellerName sellerType rxDrugScheduleType @include(if:$enableRxDrugScheduleModal)}fragment AdDataSponsoredVideoFragment on AdData{...on SponsoredVideos{adUuid adExpInfo moduleInfo videos{video{vastXml thumbnail spqs}products{...ProductFragment}}}}",hash:"1897c3040ba72227e4eca2f1a27b99d3720a03cb111dd96ae34e70ad57983006",disablePersistedQuery:"true"},g={type:"query",name:"AdV3DisplayDSP",query:"query AdV3DisplayDSP( $platform:Platform! $pageId:String! $pageType:PageType! $tenant:String! $moduleType:ModuleType! $pageContext:PageContextIn $locationContext:LocationContextIn $moduleConfigs:JSON $adsContext:AdsContextIn $adRequestComposite:AdRequestCompositeIn ){adV3( platform:$platform pageId:$pageId pageType:$pageType tenant:$tenant moduleType:$moduleType locationContext:$locationContext pageContext:$pageContext moduleConfigs:$moduleConfigs adsContext:$adsContext adRequestComposite:$adRequestComposite ){status module adContent{type data{__typename...AdDataDisplayAdFragment __typename...AdDataDisplayAdDSPFragment}}}}fragment AdDataDisplayAdDSPFragment on AdData{...on MultiImpDspAd{ads{assets eventTrackers link metaData templateId variantId availableVariantIds}}...on DisplayAdDSP{assets eventTrackers link metaData templateId variantId availableVariantIds}}fragment AdDataDisplayAdFragment on AdData{...on DisplayAd{json status}}",hash:"70d464340dca20be7426d426b2656f592708195e2a6c08a3af9206a74ae8ea70",disablePersistedQuery:"true"},v={type:"query",name:"AdV3Display",query:"query AdV3Display( $platform:Platform! $pageId:String! $pageType:PageType! $tenant:String! $moduleType:ModuleType! $pageContext:PageContextIn $locationContext:LocationContextIn $moduleConfigs:JSON $adsContext:AdsContextIn $adRequestComposite:AdRequestCompositeIn ){adV3( platform:$platform pageId:$pageId pageType:$pageType tenant:$tenant moduleType:$moduleType locationContext:$locationContext pageContext:$pageContext moduleConfigs:$moduleConfigs adsContext:$adsContext adRequestComposite:$adRequestComposite ){status module adContent{type data{__typename...AdDataDisplayAdFragment}}}}fragment AdDataDisplayAdFragment on AdData{...on DisplayAd{json status}}",hash:"27e240805408da04beb3d652c4539f5c1bd42b73cb52862d23de15e49bb700dd",disablePersistedQuery:"true"},f={type:"query",name:"AdV3",query:"query AdV3( $platform:Platform! $pageId:String! $pageType:PageType! $tenant:String! $moduleType:ModuleType! $pageContext:PageContextIn $locationContext:LocationContextIn $moduleConfigs:JSON $adsContext:AdsContextIn $adRequestComposite:AdRequestCompositeIn $enableRxDrugScheduleModal:Boolean = false $enableAdsPromoData:Boolean = false $enableSignInToSeePrice:Boolean = false $enableItemLimits:Boolean = false ){adV3( platform:$platform pageId:$pageId pageType:$pageType tenant:$tenant moduleType:$moduleType locationContext:$locationContext pageContext:$pageContext moduleConfigs:$moduleConfigs adsContext:$adsContext adRequestComposite:$adRequestComposite ){status module server adsContext adContent{type model title qc data{__typename...AdDataDisplayAdFragment __typename...AdDataDisplayAdDSPFragment __typename...AdDataSponsoredProductsFragment __typename...AdDataSponsoredVideoFragment}}}}fragment AdDataDisplayAdFragment on AdData{...on DisplayAd{json status}}fragment AdDataDisplayAdDSPFragment on AdData{...on MultiImpDspAd{ads{assets eventTrackers link metaData templateId variantId availableVariantIds}}...on DisplayAdDSP{assets eventTrackers link metaData templateId variantId availableVariantIds}}fragment AdDataSponsoredProductsFragment on AdData{...on SponsoredProducts{adUuid adExpInfo moduleInfo products{...ProductFragment}}}fragment ProductFragment on Product{usItemId offerId specialCtaType @include(if:$enableSignInToSeePrice) orderMinLimit @include(if:$enableItemLimits) orderLimit @include(if:$enableItemLimits) badges{flags{__typename...on BaseBadge{id text key query type styleId}...on PreviouslyPurchasedBadge{id text key lastBoughtOn numBought criteria{name value}}}labels{__typename...on BaseBadge{id text key}...on PreviouslyPurchasedBadge{id text key lastBoughtOn numBought}}tags{__typename...on BaseBadge{id text key}}groups{__typename name members{...on BadgeGroupMember{__typename id key memberType rank slaText styleId text type}...on CompositeGroupMember{__typename join memberType styleId suffix members{__typename id key memberType rank slaText styleId text type}}}}groupsV2{name flow pos members{memType memId memStyleId fbMemStyleId content{type value styleId fbStyleId contDesc url actionId}}}}priceInfo{priceDisplayCodes{rollback reducedPrice eligibleForAssociateDiscount clearance strikethrough submapType priceDisplayCondition unitOfMeasure pricePerUnitUom}currentPrice{price priceString priceDisplay}wasPrice{price priceString}listPrice{price priceString}priceRange{minPrice maxPrice priceString}unitPrice{price priceString}savingsAmount{priceString}comparisonPrice{priceString}subscriptionPrice{priceString subscriptionString price minPrice maxPrice intervalFrequency duration percentageRate durationUOM interestUOM downPaymentString}wPlusEarlyAccessPrice{memberPrice{price priceString priceDisplay}savings{amount priceString}eventStartTime eventStartTimeDisplay}}preOrder{streetDate streetDateDisplayable streetDateType isPreOrder preOrderMessage preOrderStreetDateMessage}annualEventV2 earlyAccessEvent isEarlyAccessItem eventAttributes{priceFlip specialBuy}snapEligible showOptions promoData @include(if:$enableAdsPromoData){type templateData{priceString imageUrl}}sponsoredProduct{spQs clickBeacon spTags}canonicalUrl conditionV2{code groupCode}numberOfReviews averageRating availabilityStatus imageInfo{thumbnailUrl allImages{id url}}name fulfillmentBadge classType type showAtc brand sellerId sellerName sellerType rxDrugScheduleType @include(if:$enableRxDrugScheduleModal)}fragment AdDataSponsoredVideoFragment on AdData{...on SponsoredVideos{adUuid adExpInfo moduleInfo videos{video{vastXml thumbnail spqs}products{...ProductFragment}}}}",hash:"099538b08642f7739f464322a1acb80a1ddea1f6bc5083aa22a14fe66fc49f33",disablePersistedQuery:"true"};var C=a(450400);const D=(e,t)=>{let{variables:a}=t;return{queryKey:["ad-v2",a],queryFn:()=>{var t,n,i;const s=(0,o.v)().displayPPMMode,l=(0,C.gI)(a.moduleType),r=(null===(t=a.adRequestComposite)||void 0===t||null===(n=t.clientCapabilities)||void 0===n||null===(i=n.templateIds)||void 0===i?void 0:i.length)&&l,p=(0,o.v)().fillEmptyLocWithProductLocEnable,u=(0,o.v)().ipBbLazyLoadingEnable;p&&"ITEM"===a.pageType&&"MOBILE_WEB"===a.platform&&(0,d.cM)(["info","ads"],{type:"log",name:"ads-variables",message:"ads request",payload:a,ipBbLazyLoadingEnable:u});const g=e.getGqlFetch(l?"adsgateway":"cegateway",(e=>(t,n)=>{n.headers["ads-module-type"]=a.moduleType;let o=t;return s&&(o=(0,C.lk)(t,l)),e(o,n)}));return g(r?m:s&&l?c:y,a)}}},b=(e,t)=>{let{variables:a}=t;return{queryKey:["ad-v3",a],queryFn:()=>{var t,n,d;const i=(0,o.v)().displayPPMMode,s=(0,C.gI)(a.moduleType),l="DynamicAdContainer"===a.moduleType,r=(0,o.v)().enablePPMModeForDAC,p=r&&l&&!a.moduleConfigs.adModules.map((e=>e.moduleType)).some(C.Q9),u=p?a.moduleConfigs.adModules.some((e=>{var t,a;return(null===e||void 0===e||null===(t=e.clientCapabilities)||void 0===t||null===(a=t.templateIds)||void 0===a?void 0:a.length)>0})):(null===(t=a.adRequestComposite)||void 0===t||null===(n=t.clientCapabilities)||void 0===n||null===(d=n.templateIds)||void 0===d?void 0:d.length)&&s,m=e.getGqlFetch(s?"adsgateway":"cegateway",(e=>(t,a)=>{let n=t;return(r?i:i&&!l)&&(n=(0,C.lk)(t,s||p)),e(n,a)}));return m(u?g:i&&(s||p)?v:f,a)}}},A=(e,t)=>{if((0,o.v)().fillEmptyLocWithProductLocEnable&&"ITEM"===e.pageType&&"MOBILE_WEB"===e.platform){var a,n;const o=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.adV2;(0,d.cM)(["info","ads"],{type:"log",name:"ads-response",message:"ads response",payload:{moduleType:e.moduleType,moduleConfigs:e.moduleConfigs,isAdContentDataPresent:!!(null===o||void 0===o||null===(n=o.adContent)||void 0===n?void 0:n.data),status:null===o||void 0===o?void 0:o.status}})}},$=function(e){let{variables:t}=e,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];var d,m,c,y,g,v,f,C,b,$,I,S;const P=(0,p.useRef)((0,r.x0)()),T=(0,p.useMemo)((()=>a?Date.now():null),[a]),x=(0,p.useContext)(l.p);(0,p.useEffect)((()=>{const e=P.current;return a&&(0,n.L)({type:"ADS_QUERY_START",payload:{id:e,variables:t,tempo:x}}),()=>{(0,n.L)({type:"ADS_QUERY_CLEAR",payload:{id:e,variables:t}})}}),[a,x,t]);const _=D((0,i.Z)(),{variables:t}),{data:h,isFetching:R,...q}=(0,s.a)({..._,config:{enabled:a,cacheTime:0,staleTime:0,refetchOnWindowFocus:!1}});(0,p.useEffect)((()=>{if(!R&&a){const e=q.error,a=h,o=P.current,d=Date.now(),i={type:e?"ADS_QUERY_ERR":"ADS_QUERY_SUCCESS",payload:{id:o,start:T,end:d,variables:t,result:a,err:null===e||void 0===e?void 0:e.message,tempo:x}};(0,n.L)(i),A(t,h)}}),[h,a,R,q,T,x,t]);const E=null===h||void 0===h?void 0:h.data;if((0,o.v)().dspProcessingEnable&&(null===(d=t.adRequestComposite)||void 0===d||null===(m=d.clientCapabilities)||void 0===m||null===(c=m.templateIds)||void 0===c?void 0:c.length)&&"DisplayAdDSP"===(null===E||void 0===E||null===(y=E.adV2)||void 0===y||null===(g=y.adContent)||void 0===g||null===(v=g.data)||void 0===v?void 0:v.__typename)){Object.keys(E.adV2.adContent.data.assets||{}).length>0&&(E.adV2.adContent.data={__typename:"DisplayAd",...(0,u.t)(E.adV2.adContent.data,"ARTEMIS")})}if((0,o.v)().dspProcessingEnable&&(0,o.v)().dspMultiProcessingEnable&&(null===(f=t.adRequestComposite)||void 0===f||null===(C=f.clientCapabilities)||void 0===C||null===(b=C.templateIds)||void 0===b?void 0:b.length)&&"MultiImpDspAd"===(null===E||void 0===E||null===($=E.adV2)||void 0===$||null===(I=$.adContent)||void 0===I||null===(S=I.data)||void 0===S?void 0:S.__typename)){const e={},t=E.adV2.adContent.data;(null===t||void 0===t?void 0:t.ads)&&t.ads.forEach((t=>{var a,n;Object.keys(t&&(null===t||void 0===t?void 0:t.assets)||{}).length>0&&((null===t||void 0===t||null===(a=t.metaData)||void 0===a?void 0:a.adLocation)&&(e[null===t||void 0===t||null===(n=t.metaData)||void 0===n?void 0:n.adLocation]=(0,u.t)(t,"ARTEMIS").json||{}))})),E.adV2.adContent.data={__typename:"DisplayAd",status:"SUCCESS",json:e}}return{...q,data:E,isFetching:R}},I=(e,t,a)=>{const o=(0,p.useContext)(l.p);(0,p.useEffect)((()=>(e&&(0,n.L)({type:"ADS_QUERY_START",payload:{id:t,variables:a,tempo:o}}),()=>{(0,n.L)({type:"ADS_QUERY_CLEAR",payload:{id:t,variables:a}})})),[e,o,t,a])},S=(e,t,a,o,d,i,s)=>{const r=(0,p.useContext)(l.p);(0,p.useEffect)((()=>{if(!i&&t){const t=d,i=Date.now(),l={type:s?"ADS_QUERY_ERR":"ADS_QUERY_SUCCESS",payload:{id:a,start:o,end:i,variables:e,result:t,err:null===s||void 0===s?void 0:s.message,tempo:r}};(0,n.L)(l),A(e,d)}}),[d,t,i,s,o,r,a,e])},P=(e,t)=>{var a,n,o,d,i,s;if(t&&(null===(a=e.moduleConfigs)||void 0===a?void 0:a.adModules)){const[a]=t.split("_"),n=e.moduleConfigs.adModules.find((e=>e.moduleType===a));var l,r;if(n)return null!==(r=null===(l=n.clientCapabilities)||void 0===l?void 0:l.templateIds)&&void 0!==r?r:[]}return(null===(n=e.adRequestComposite)||void 0===n||null===(o=n.clientCapabilities)||void 0===o?void 0:o.templateIds)&&null!==(s=null===(d=e.adRequestComposite)||void 0===d||null===(i=d.clientCapabilities)||void 0===i?void 0:i.templateIds)&&void 0!==s?s:[]},T=(e,t)=>{if((0,o.v)().dspProcessingEnable&&t.length&&"DisplayAdDSP"===e.__typename){const t=Object.keys(e.assets||{});if(t.length>0&&!t.includes("501"))return{__typename:"DisplayAd",...(0,u.t)(e,"ARTEMIS")}}if((0,o.v)().dspProcessingEnable&&(0,o.v)().dspMultiProcessingEnable&&t.length&&"MultiImpDspAd"===e.__typename){const t={};return(null===e||void 0===e?void 0:e.ads)&&e.ads.forEach((e=>{var a,n;Object.keys(e&&(null===e||void 0===e?void 0:e.assets)||{}).length>0&&((null===e||void 0===e||null===(a=e.metaData)||void 0===a?void 0:a.adLocation)&&(t[null===e||void 0===e||null===(n=e.metaData)||void 0===n?void 0:n.adLocation]=(0,u.t)(e,"ARTEMIS").json||{}))})),{__typename:"DisplayAd",status:"SUCCESS",json:t}}return null},x=function(e){let{variables:t}=e,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(0,p.useRef)((0,r.x0)()),o=(0,p.useMemo)((()=>a?Date.now():null),[a]);I(a,n.current,t);const d=D((0,i.Z)(),{variables:t}),{data:l,isFetching:u,...m}=(0,s.a)({...d,config:{enabled:a,cacheTime:0,staleTime:0,refetchOnWindowFocus:!1}});S(t,a,n.current,o,l,u,m.error);const c=null===l||void 0===l?void 0:l.data;var y,g;if(c&&(null===(y=c.adV2)||void 0===y||null===(g=y.adContent)||void 0===g?void 0:g.data)){var v,f,C;const e=T(c.adV2.adContent.data,null!==(C=null===(v=t.adRequestComposite)||void 0===v||null===(f=v.clientCapabilities)||void 0===f?void 0:f.templateIds)&&void 0!==C?C:[]);e&&(c.adV2.adContent.data=e)}return{...m,data:c,isFetching:u}},_=function(e){let{variables:t}=e,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const n=(0,p.useRef)((0,r.x0)()),o=(0,p.useMemo)((()=>a?Date.now():null),[a]);I(a,n.current,t);const d=b((0,i.Z)(),{variables:t}),{data:l,isFetching:u,...m}=(0,s.a)({...d,config:{enabled:a,cacheTime:0,staleTime:0,refetchOnWindowFocus:!1}});S(t,a,n.current,o,l,u,m.error);const c=null===l||void 0===l?void 0:l.data;var y,g;if(c&&(null===(y=c.adV3)||void 0===y||null===(g=y.adContent)||void 0===g?void 0:g.data)){var v,f,C,D,A;const e=P(t,null===(v=c.adV3)||void 0===v?void 0:v.module),a=T(c.adV3.adContent.data,e);let n=!1;const o=null===(f=c.adV3.adContent.data)||void 0===f?void 0:f.__typename;let d={};var $;if("DisplayAdDSP"===o)d=null===($=c.adV3.adContent.data)||void 0===$?void 0:$.assets;else if("MultiImpDspAd"===o&&(null===(C=c.adV3.adContent.data)||void 0===C||null===(D=C.ads)||void 0===D?void 0:D.length)){var x,_;d=null===(_=null===(x=c.adV3.adContent.data)||void 0===x?void 0:x.ads[0])||void 0===_?void 0:_.assets}n=d&&0===(null===(A=Object.keys(d))||void 0===A?void 0:A.length),a&&!n&&(c.adV3.adContent.data=a)}return{...m,data:c,isFetching:u}}},918616:function(e,t,a){a.d(t,{J:function(){return d},N:function(){return o}});var n=a(969538);const o=(0,n.createContext)((()=>{})),d=()=>(0,n.useContext)(o)}}]);