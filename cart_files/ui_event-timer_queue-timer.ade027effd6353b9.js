"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[45655,59647],{530090:function(e,t,i){i.d(t,{W:function(){return v},w:function(){return h}});var a=i(247687),s=i(409506),n=i(689221),o=i(22769),r=i(324523),l=i.n(r),c=i(969538),m=i(704751),u=i(983151),d=i(949250);const g={DEFAULT:{backgroundColor:"bg-gold",fontColor:"black"},WARNING:{backgroundColor:"bg-red",fontColor:"white"},EXPIRED:{backgroundColor:"bg-near-white",fontColor:"black"},ACTIVE:{backgroundColor:"bg-white",fontColor:"black"}},p={fontSize:".625rem",verticalAlign:"-.01875em",marginTop:"2px",marginRight:"2px"},x=e=>{const{timeUnits:t,showClockIcon:i=!0}=e;return(0,a.jsxs)("div",{className:l()("flex lh-copy f5 br1 justify-center","bg-washed-blue","black"),style:{width:"61px"},"data-testid":"unit-timer",children:[i&&(0,a.jsx)(o.J,{name:"Clock",title:(0,n.m)(m,"timer"),className:"mr1 mt1"}),(0,a.jsx)("span",{"aria-hidden":!0,className:l()("b"),children:0===t.minutes?"".concat(t.minutes+1).concat((0,n.m)(m,"timerTextMinuteSingular")):"".concat(t.minutes+1).concat((0,n.m)(m,"timerTextMinutesPlural"))}),(0,a.jsx)(s.VisuallyHidden,{role:"timer","aria-live":"assertive","aria-atomic":"true","aria-relevant":"all",children:(0,n.m)(m,"waitTime",{minutes:t.minutes+1})})]})},v=e=>{const{timeUnits:t,timerState:i,showClockIcon:r=!0,size:c,ariaLabelAddOnMessage:u}=e,{backgroundColor:d,fontColor:x}=g[i];let v=r?"75px":"52px";"small"===c&&(v=r?"45px":"35px");const h="small"===c;return(0,a.jsxs)("div",{className:l()("flex lh-copy br1 justify-center",d,x,{f5:!h},{f8:h}),style:{width:v},"data-testid":"queue-timer",children:[r&&(0,a.jsx)(o.J,{name:"Clock",title:(0,n.m)(m,"timer"),className:l()({"mr1 mt1":!h}),style:h?p:{}}),(0,a.jsx)("span",{"aria-hidden":!0,className:"b",children:(0,n.m)(m,"countDownTimer",{minutes:String(t.minutes).padStart(2,"0"),seconds:String(t.seconds).padStart(2,"0")})}),(0,a.jsx)(s.VisuallyHidden,{role:"timer","aria-live":"off","aria-atomic":"true","aria-relevant":"all",children:(0,n.m)(m,"minsLeft",{minutes:t.minutes,addonMessage:u})})]})},h=e=>{const{endTime:t,onTimeChange:i,ticketState:s="valid",showClockIcon:n,className:o,size:r="default",ariaLabelAddOnMessage:l}=e,{timeRemainingInSec:m}=(0,u.A)(t.getTime()),g=(0,d.E3)(m),p=0===g.minutes&&0===g.seconds?"EXPIRED":g.minutes<2?"WARNING":"DEFAULT",{0:h,1:k}=(0,c.useState)(p);return(0,c.useEffect)((()=>{i&&i(m),0===g.minutes&&0===g.seconds?k("EXPIRED"):g.minutes>=2?k("DEFAULT"):k("WARNING")}),[g,m,i]),(0,a.jsxs)("div",{className:o,children:[("pending"===s||"paused"===s)&&(0,a.jsx)(x,{timeUnits:g,showClockIcon:n}),"valid"===s&&(0,a.jsx)(v,{timeUnits:g,timerState:h,showClockIcon:n,size:r,ariaLabelAddOnMessage:l})]})}},820038:function(e,t,i){i.d(t,{P:function(){return s}});const a="https://i5.walmartimages.com/dfw/4ff9c6c9-64e4/k2-_cf34b75a-7d8e-44a1-935c-2b5bc9bb031c.v1.jpg",s=e=>{let{src:t,height:i,width:s,background:n="FFFFFF",quality:o,format:r,bypassOdn:l}=e;if(!i||!s)return t||a;const[c,m]=(t||a).split("?"),u=new URLSearchParams(m||"");return u.set("odnHeight",i),u.set("odnWidth",s),u.set("odnBg",n),o&&u.set("odnDynImageQuality",o),r&&u.set("format",r),l?"".concat(c):"".concat(c,"?").concat(u.toString())}},631652:function(e,t,i){i.r(t),i.d(t,{QueuingLayoutWrapper:function(){return P},default:function(){return a.Z}});var a=i(338001),s=i(247687),n=i(512142),o=i(409506),r=i(702802),l=i(689221),c=i(217091),m=i(636843),u=i(283714),d=i(949250),g=i(969538),p=i(309513),x=i(258827),v=i(790291);var h=i(48555),k=i(580149);const f="Hurry! Less than 2 minutes left to check out for",j="Woohoo - the wait is over for",T="You just joined the line for",C=e=>{const{addSnack:t}=(0,o.useSnackbar)(),{getValue:i,setValue:a}=(0,k.Xs)("queueSnackbarHistory"),s=(0,c.wG)(),{pageTitle:n}=(0,g.useContext)(m.z1);return{QueueSnackbar:()=>{if(e&&e.length>0){const o=e.length>1,r=i()||{},{snackBarDisplayItem:l,storageUpdates:c}=b(e,r);l&&((e,i,a,o)=>{t({message:e,UNSAFE_style:{position:"absolute",bottom:i?"35px":"10px",left:"24px",width:"400px"},onClose:e=>{(null===e||void 0===e?void 0:e.target)&&s({context:n,action:"onClick",name:"queueingSnackBar",payload:{nm:{nm:"dismiss"},ta:{ov:"queueingSnackBar"},co:{ty:o},pr:{us:a}}})}}),s({context:n,action:"overlayView",name:"queueingSnackBar",payload:{nm:{nm:"queueingSnackBar"},co:{ty:o},pr:{us:a}}})})(l.message,o,l.itemId,l.ticketState),c&&c.map((e=>a(e)))}}}},S=["valid","pending","paused"],b=(e,t)=>{const i=e.map((e=>{const i=(0,p.Z)(e,{onOpenLeaveQueueDialog:()=>null},""),{timerProps:a}=i,{itemID:s}=e.customMetadata.item;let{name:n}=e.customMetadata.item;n=n.length>50?n.slice(0,50).concat("..."):n;const o=t[s]||{};if(a){const e=a.endTime?(0,d.ok)(a.endTime.getTime()):0;if("valid"===(null===a||void 0===a?void 0:a.ticketState)&&e<=120&&!(null===o||void 0===o?void 0:o.expiry)){const i={...t,...M(s,t,"expiry")};return{message:"".concat(f," ").concat(n),timeStillRemainingForTickeToExpire:e,ticketState:null===a||void 0===a?void 0:a.ticketState,itemId:s,storageUpdate:i}}if("valid"!==(null===a||void 0===a?void 0:a.ticketState)||o&&(null===o||void 0===o?void 0:o.valid)){if("pending"!==(null===a||void 0===a?void 0:a.ticketState)&&"paused"!==(null===a||void 0===a?void 0:a.ticketState)||o&&(null===o||void 0===o?void 0:o.pending))return{message:"",timeStillRemainingForTickeToExpire:0,ticketState:"",itemId:"",storageUpdate:null};{const i={...t,...M(s,t,"pending")};return{message:"".concat(T," ").concat(n),timeStillRemainingForTickeToExpire:e,ticketState:null===a||void 0===a?void 0:a.ticketState,itemId:s,storageUpdate:i}}}{const i={...t,...M(s,t,"valid")};return{message:"".concat(j," ").concat(n),timeStillRemainingForTickeToExpire:e,ticketState:null===a||void 0===a?void 0:a.ticketState,itemId:s,storageUpdate:i}}}return{message:"",timeStillRemainingForTickeToExpire:0,ticketState:"",itemId:"",storageUpdate:null}})),a=i.filter((e=>""!==e.message)),s=i.filter((e=>!!e.storageUpdate));return{snackBarDisplayItem:a.sort(((e,t)=>e.ticketState===t.ticketState?e.timeStillRemainingForTickeToExpire-t.timeStillRemainingForTickeToExpire:S.indexOf(e.ticketState)-S.indexOf(t.ticketState)))[0],storageUpdates:s.map((e=>e.storageUpdate))}},M=(e,t,i)=>({[e]:{...t[e],[i]:!0}}),P=()=>{var e;const{pageTitle:t}=(0,g.useContext)(m.z1),{push:i}=(0,u.tv)().router,{footerProps:k,ctaProps:f,leaveQueueProps:j,timerProps:T,isError:S,isLeaveDialogueLoading:b,onDismissError:M,onConfirmLeaveQueue:P,onCloseLeaveQueue:w,onStayInLine:D,onOpenLeaveQueueDialog:N,onCloseQueueDialog:I,displayedQueueTicket:L,queueTickets:y,isQueueDialogOpen:Q,ticketToLeave:E,shouldRenderError:F}=(0,x.i)(),{QueueSnackbar:R}=C(y),U=(0,c.wG)(),Z=null===(e=(0,r.iC)(n.YL).shared.values)||void 0===e?void 0:e.queueTimeToCompletePurchase,{shouldRenderQueue:q,isBannerPages:O}=(()=>{const{asPath:e}=(0,u.tv)().router,{queueData:t}=(0,v.B)(),i=e.includes("cart"),a=e.includes("bookslot"),s=e.includes("/qp"),n=(0,g.useMemo)((()=>{const n=i||a||s;if(t&&0!==t.length){const i=t.some((t=>t&&"customMetadata"in t&&(t.customMetadata.item.itemURL===e||(null===e||void 0===e?void 0:e.includes(t.customMetadata.item.itemID)))));return n||i}return n}),[e,i,a,s,t]);return{shouldRenderQueue:(0,g.useMemo)((()=>t&&!(0===t.length||i||a||s||t.some((t=>t&&"customMetadata"in t&&(t.customMetadata.item.itemURL===e||(null===e||void 0===e?void 0:e.includes(t.customMetadata.item.itemID))))))),[e,i,a,s,t]),isBannerPages:n}})();if(!O&&F)return(0,s.jsx)(a.Z,{float:!0,children:(0,s.jsx)(a.Z.Error,{})});let A=0;!L||"pending"!==L.state&&"paused"!==L.state?L&&"valid"===L.state&&(A=null===L||void 0===L?void 0:L.expires):A=null===L||void 0===L?void 0:L.expectedTurnTimeUnixTimestamp;const B=(0,d.ok)(A),V=[],W=[];return y&&y.length>0&&y.map((e=>("valid"===e.state&&V.push(e),"paused"!==e.state&&"pending"!==e.state||W.push(e),null))),q&&L&&"customMetadata"in L&&"expires"in L&&j?(0,s.jsxs)(s.Fragment,{children:[!Q&&R(),(0,s.jsx)(c.tp,{context:t,action:"moduleView",name:"reservationTimer",payload:{nm:{nm:"reservationTimer"},li:{nm:"reservationTimer"},pr:{us:L.customMetadata.item.itemID,wt:1e3*B},ta:{mo:"reservationTimer"}},children:(0,s.jsxs)(a.Z,{isQueueDialogOpen:Q,float:!0,children:[(0,s.jsxs)(a.Z.Body,{onClick:()=>j.onClick(L,Q),text:j.text,queueTicket:L,children:[(0,s.jsxs)("div",{className:"flex items-center flex-auto justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center",children:[L.customMetadata.item.imageURL&&(0,s.jsx)(a.Z.Image,{name:L.customMetadata.item.name,isQueueFooterOpen:Boolean(null===k||void 0===k?void 0:k.message),src:L.customMetadata.item.imageURL,className:"mh2"}),T&&(0,s.jsx)(s.Fragment,{children:"valid"===L.state||"guaranteed"===L.customMetadata.admissionLikelihood?(0,s.jsxs)(s.Fragment,{children:[T.endTime&&(0,s.jsx)(a.Z.Timer,{endTime:T.endTime,ticketState:T.ticketState,showClockIcon:!1}),T.message&&(0,s.jsx)(a.Z.TimerMessage,{message:T.message})]}):(0,s.jsx)("p",{className:"black",children:(0,l.m)(h,"youAreInLine")})})]}),(null===f||void 0===f?void 0:f.onClick)&&(0,s.jsx)(a.Z.Cta,{queueTicket:L,onClick:f.onClick(i,U,Q)})]}),(0,s.jsx)("div",{className:"w3 na2",style:{transform:"rotate(90deg)"},children:(0,s.jsx)(o.Divider,{})})]}),k&&(0,s.jsx)(a.Z.Footer,{onClick:k.onClick,message:k.message}),(0,s.jsxs)(a.Z.Dialog,{title:(0,l.m)(h,"dialogTitle",{queueTickets:y.length}),isOpen:Q,onClose:I,queueTickets:y,children:[!!V.length&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"f6 pb3 white mv0",role:"heading","aria-level":3,children:(0,l.m)(h,"timerStartMessage")}),V.map((e=>{var n;const r=(0,p.Z)(e,{onOpenLeaveQueueDialog:N},t);return r.leaveQueueProps&&"customMetadata"in e&&(0,s.jsx)(a.Z.Body,{isQueueDialog:!0,onClick:()=>{var t;return null===(t=r.leaveQueueProps)||void 0===t?void 0:t.onClick(e,Q)},text:r.leaveQueueProps.text,queueTicket:e,children:(0,s.jsxs)("div",{className:"flex flex-column",children:[(0,s.jsx)("div",{className:"flex mb3",children:r.timerProps&&(0,s.jsxs)(s.Fragment,{children:[r.timerProps.endTime&&(0,s.jsx)(a.Z.Timer,{endTime:r.timerProps.endTime,ticketState:r.timerProps.ticketState,showClockIcon:!1}),r.timerProps.message&&(0,s.jsx)(a.Z.TimerMessage,{isQueueDialog:!0,message:r.timerProps.message})]})}),(0,s.jsxs)("div",{className:"flex mb2",children:[(0,s.jsx)(a.Z.Image,{isQueueDialog:!0,isQueueFooterOpen:!0,name:e.customMetadata.item.name,src:e.customMetadata.item.imageURL}),(0,s.jsx)("p",{className:"f6 mt0 mr2 w-two-thirds h4",children:(0,s.jsx)(o.LineClamp,{lines:3,children:e.customMetadata.item.name})}),(0,s.jsxs)("div",{className:"flex flex-column ml-auto",children:[(0,s.jsx)("p",{className:"f5 b ma0",children:e.customMetadata.item.currentPrice}),e.customMetadata.item.wasPrice&&(0,s.jsx)("p",{className:"f7 ma0 pl2 strike",children:e.customMetadata.item.wasPrice})]})]}),(null===(n=r.ctaProps)||void 0===n?void 0:n.onClick)&&(0,s.jsx)(a.Z.Cta,{queueTicket:e,isQueueDialog:!0,onClick:r.ctaProps.onClick(i,U,Q)})]})},e.customMetadata.item.itemID)}))]}),V.length>0&&W.length>0&&(0,s.jsx)("div",{className:"mb3",children:(0,s.jsx)(o.Divider,{})}),!!W.length&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"f6 pb3 white mv0",role:"heading","aria-level":3,children:(0,l.m)(h,"queueDialog",{queueTime:Z})}),W.map((e=>{var n;const r=(0,p.Z)(e,{onOpenLeaveQueueDialog:N},t);return r.leaveQueueProps&&"customMetadata"in e&&(0,s.jsx)(a.Z.Body,{isQueueDialog:!0,onClick:()=>{var t;return null===(t=r.leaveQueueProps)||void 0===t?void 0:t.onClick(e,Q)},text:r.leaveQueueProps.text,queueTicket:e,children:(0,s.jsxs)("div",{className:"flex flex-column",children:[(0,s.jsx)("div",{className:"flex mb3",children:r.timerProps&&"guaranteed"===e.customMetadata.admissionLikelihood?(0,s.jsxs)(s.Fragment,{children:[r.timerProps.endTime&&(0,s.jsx)(a.Z.Timer,{endTime:r.timerProps.endTime,ticketState:r.timerProps.ticketState,showClockIcon:!1}),r.timerProps.message&&(0,s.jsx)(a.Z.TimerMessage,{isQueueDialog:!0,message:r.timerProps.message})]}):(0,s.jsx)("span",{className:"black",children:(0,l.m)(h,"youAreInLine")})}),(0,s.jsxs)("div",{className:"flex mb2",children:[(0,s.jsx)(a.Z.Image,{isQueueDialog:!0,isQueueFooterOpen:!0,name:e.customMetadata.item.name,src:e.customMetadata.item.imageURL}),(0,s.jsx)("p",{className:"f6 mt0 mr2 w-two-thirds h4",children:(0,s.jsx)(o.LineClamp,{lines:3,children:e.customMetadata.item.name})}),(0,s.jsxs)("div",{className:"flex flex-column ml-auto",children:[(0,s.jsx)("p",{className:"f5 b ma0",children:e.customMetadata.item.currentPrice}),e.customMetadata.item.wasPrice&&(0,s.jsx)("p",{className:"f7 ma0 pl2 strike",children:e.customMetadata.item.wasPrice})]})]}),(null===(n=r.ctaProps)||void 0===n?void 0:n.onClick)&&(0,s.jsx)(a.Z.Cta,{queueTicket:e,isQueueDialog:!0,onClick:r.ctaProps.onClick(i,U,Q)})]})},e.customMetadata.item.itemID)}))]})]}),(0,s.jsx)(a.Z.LeaveQueueDialog,{isOpen:Boolean(E),isError:S,isLeaveDialogueLoading:b,onClose:w,onStayInLine:D,onDismissError:M,onLeaveQueue:()=>E&&P(E)})]})})]}):null}}}]);