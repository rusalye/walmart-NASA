"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[84117],{880234:function(e,t,i){i.d(t,{b:function(){return n}});var a=i(258309),o=i(772519),s=i(969538);function n(){var e,t;const i=null===(e=(0,a.S)())||void 0===e||null===(t=e.publicRuntimeConfig)||void 0===t?void 0:t.moatIvt,n=(0,o.yh)(),{0:r,1:c}=(0,s.useState)(!1);return(0,s.useEffect)((()=>{i&&n(i).then((()=>{c(!0)}))}),[n,i]),r}},522598:function(e,t,i){i.d(t,{r:function(){return o}});var a=i(372355);const o=e=>{let{elementRef:t,commonDisplayAdPayload:i,track3PEnable:o,onBeacon:s,dbg:n,root:r,moduleLocation:c,adContent:l,adsPerfMetrics:d}=e;(0,a.p)({commonDisplayAdPayload:i,target:t,track3PEnable:o,onBeacon:s,dbg:n,root:r,moduleLocation:c,templateId:null===l||void 0===l?void 0:l.templateId,adsPerfMetrics:d})}},372355:function(e,t,i){i.d(t,{p:function(){return x}});var a=i(444714),o=i(195620),s=i(624877),n=i(355893),r=i(505844),c=i(969538),l=i(988216),d=i(188765),m=i.n(d),u=i(743933),h=i(555464),I=i(240788);var E=i(290885),p=i(427958),g=i(77425),f=i(145014),v=i(104555),A=i(305504),T=i(473221);const y={[u.X9.PERIODIC_UPDATE]:-1,[u.Au.AD_IMPRESSION]:0,[u.Au.UNLOAD]:1,[u.Au.CLICK]:2,[u.Au.TOUCH]:3,[u.Au.MRC_VIEWABLE]:4,[u.X9.GROUPM_VIEWABLE]:5,[u.C7.INVIEW_50_5s]:6,[u.C7.INVIEW_50_15s]:7,[u.C7.FULL_VIEWABLE]:8};var C=(e,t,i)=>{const{enableAdRequestIdPulseBeacon:o}=(0,a.v)(),s=Date.now(),n=e.trackingState;n.eventTypeCount[t]++;const r=Number(e.element.offsetHeight),c=Number(e.element.offsetWidth),[l,d]=(0,E.a)(),m=s-n.adLoadedTime,h=n.adLoadedTime,I=s,C=(0,T.AE)(e,e.startMrcViewTime,n.totalMrcViewTime,0),D=(0,T.AE)(e,e.startFullInViewOTS,n.fullInViewOTS,0),L=(0,T.HB)(e,e.startFiftyPctContTime,n.totalFiftyPctContTime,0),V=(0,T.HB)(e,e.startHundredPctContTime,n.totalHundredPctContTime,0),{adIds:_,adLocation:b,assetUrl:P,dfpTag:k,pageType:O,random:w,adUnitId:M,categoryId:S,moduleLocation:B}=e.getAdCustomInfo(),U=v.Y2.getAdsXpa(),R=null!==M&&void 0!==M?M:"0",N=null!==S&&void 0!==S?S:"0",W=(0,g.W)(),F="heropov2"===b||"heropov3"===b||"heropov4"===b||"heropov5"===b||"heropov6"===b?"HeroPOV":B,H="".concat(W,"-").concat(O,"-").concat(F,"-").concat(b),Z={[A.c7]:(0,f.D)(),[A.Ze]:y[t],[A.Ag]:C,[A.$M]:P,[A.Ms]:_,[A.fD]:window.location.href,[A.ij]:window.location.href,[A.F7]:L,[A.tv]:D,[A.Hx]:r,[A.QK]:V,[A.mg]:I,[A.FD]:w,[A.n6]:d,[A.V]:l,[A.q1]:h,[A.wc]:m,[A.Bn]:n.eventTypeCount[t]-1,[A.mF]:c,[A.R0]:!0,[A.Vf]:!0,[A.Cx]:b,[A.J7]:k,[A.Dk]:O,[A.Zs]:R,[A.Q0]:N,[A.t9]:U,[A.rY]:w,[A.jz]:W,[A.qo]:h,[A.hW]:(null===i||void 0===i?void 0:i.iasTeamId)||"",...o&&{[A.hH]:H},[A.ld]:(0,p.p)()},Y=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;t&&(Z[e]=i)};return Y(A.MX,n.groupMViewable),Y(A.yJ,n.groupMViewable),Y(A.Vx,n.viewabilityMRC),Y(A.xk,n.publicisFullInViewOTS),Y(A.GL,Boolean(e.touchOrClickTimeOffset)),Y(A.P1,t===u.Au.CLICK,n.eventTypeCount[t]),{payload:Z}},D=i(95089),L=i(662905),V=i(653559),_=i(179283),b=i(267349),P=i(432970),k=i(126266),O=i(762060),w=i(571993);const M={5e3:u.C7.INVIEW_50_5s,15e3:u.C7.INVIEW_50_15s};var S=(e,t)=>{e.intersectionRatio>=u.TY?(t.lastInViewFiftyTime=Date.now(),t.trackingTimeoutList[k.gg]=[...t.trackingTimeoutList[k.gg],...Object.keys(M).filter((e=>!t.firedBeacons.has(e))).map((e=>window.setTimeout((()=>{((e,t)=>{e.firedBeacons.has(t)||(e.beaconUtil.fire(t,u.JY.AD_VIEWABLE),e.firedBeacons.add(t))})(t,M[e])}),Math.max(0,Number(e)-t.cumulativeInViewFifty))))]):(t.cumulativeInViewFifty+=Date.now()-t.lastInViewFiftyTime,t.trackingTimeoutList[k.gg]=(0,l.Z)(t.trackingTimeoutList[k.gg]))};var B=(e,t)=>{e.intersectionRatio>=u.nJ&&!t.firedBeacons.has(u.C7.FULL_VIEWABLE)&&(t.beaconUtil.fire(u.C7.FULL_VIEWABLE,u.JY.AD_VIEWABLE),t.firedBeacons.add(u.C7.FULL_VIEWABLE))},U=i(863945),R=i(661664),N=i(118812);class W extends class{onClick(){this.beaconUtil.fire(u.Au.CLICK,u.JY.AD_CLICK),this.element instanceof HTMLIFrameElement||this.element.removeEventListener("click",this.onClickHandler)}initialize(){this.beaconUtil.fire(u.Au.AD_IMPRESSION,u.JY.AD_IMPRESSION),m()((e=>{this.element.id===e.id&&"click"===e.type&&this.onClick()})),this.element instanceof HTMLIFrameElement||this.element.addEventListener("click",this.onClickHandler),(0,h.Z)((()=>{"visible"!==document.visibilityState?this.windowNotVisibleTime=Date.now():"visible"===document.visibilityState&&(this.windowVisibleTimes.push({notVisible:this.windowNotVisibleTime,visible:Date.now()}),this.windowNotVisibleTime=null),this.onVisibilityChange(document.visibilityState)}))}onVisibilityChange(e){}getFullViewPercentage(){return(0,u.wf)()}getBaseTrackers(){return[I.Z]}adSizeCheck(){return Number(this.element.offsetHeight)*Number(this.element.offsetWidth)>=242500}unmount(){for(const e of Object.values(this.commonTrackingTimeoutList))(0,l.Z)(e);this.beaconUtil.fire(u.Au.UNLOAD,u.JY.AD_REMOVE)}constructor(e,t,i,a,o,s){this.windowVisibleTimes=[],this.windowNotVisibleTime=null,this.commonTrackingTimeoutList={[u.jI]:[]},this.element=e,this.displayAdProps=t,this.trackingState=i,this.beaconUtil=a,this.adCvValues=o,this.moduleLocation=s,this.trackingState.adLoadedTime=Date.now(),this.touchOrClickTimeOffset=0,this.trackingState.isAdLarge=this.adSizeCheck(),this.onClickHandler=this.onClick.bind(this)}}{initialize(){super.initialize()}onVisibilityChange(e){this.lastObservedEntry&&("hidden"===e?this.getAllTrackers().filter((e=>e!==P.Z)).forEach((e=>{e({...this.lastObservedEntry,isIntersecting:!1,intersectionRatio:0},this,(()=>{}))})):"visible"===e&&this.getAllTrackers().filter((e=>e!==P.Z)).forEach((e=>{e(this.lastObservedEntry,this,(()=>{}))})))}getAdCustomInfo(){var e;const{advertiserID:t,orderID:i,adUnitID:o,metaData:s}=this.displayAdProps,n=s.dfpResponse,r=s.dfpParams,c=n.googleLineitemId,l=n.googleCreativeId,d=r.dfpTag,m=r.targeting,u=m.location,h=m.categoryId,I=m.ptype,E=t&&i&&c&&l?"".concat(t,":").concat(i,":").concat(c,":").concat(l):void 0,p=(e=>{let{desktopImage:t,mobileImage:i,desktopLogo:a,mobileLogo:o,mainImage:s,logoImage:n,desktopBrandImage:r,mobileBrandImage:c,desktopBrandLogo:l,mobileBrandLogo:d,image:m,mainShortImage:u,tabletImage:h}=e;return t||i||a||o||s||n||r||c||l||d||m||u||h})(this.displayAdProps),g=this.moduleLocation;let f="",v="";var A,T;(0,a.v)().dspProcessingEnable&&(null===(e=this.displayAdProps.extendedDSPProps)||void 0===e?void 0:e.deviceType)?f="desktop"===(null===(A=this.displayAdProps.extendedDSPProps)||void 0===A?void 0:A.deviceType)?"WMUS":"WMUS-Mobile":f=d&&d.split("/")[2]||"";(0,a.v)().displayIdentifyAdServer&&(v=(null===(T=this.displayAdProps.extendedDSPProps)||void 0===T?void 0:T.adServer)||"GAM");return{adIds:E,adLocation:u,adUnitId:o,assetUrl:p,categoryId:h,dfpTag:f,pageType:I,random:this.displayAdProps.metaData.dfpParams.targeting.sessId,adServer:v,moduleLocation:g}}unmount(){for(const e of Object.values(this.trackingTimeoutList))(0,l.Z)(e);this.beaconUtil.fire(u.Au.UNLOAD,u.JY.AD_REMOVE),(this.element instanceof HTMLVideoElement||this.element instanceof HTMLIFrameElement&&this.displayAdProps.vastXml)&&this.beaconUtil.fire(u.Bs.AD_VIDEO_REMOVE,u.jo.AD_VIDEO_REMOVE),super.unmount()}getAllTrackers(){return[...this.getTrackers(),...this.getBaseTrackers()]}getTrackers(){return[V.Z,O.Z,U.Z,w.Z,L.Z,_.Z,b.Z,P.Z,...(0,a.v)().displayCommonTrackingExtendedEvents?[B,S]:[]]}getCommonTrackers(){return[N.ZP,R.Z]}getPayload(e){return(0,a.v)().displayCommonTracking?C(this,e):(0,D.ZP)(this,e)}constructor(e,t,i,a,o,s){super(e,t,i,a,o,s),this.startMrcViewTime=0,this.startFiftyPctContTime=0,this.startHundredPctContTime=0,this.startFullInViewOTS=0,this.mrcTotalPeriodicTime=0,this.cumulativeInViewFifty=0,this.lastInViewFiftyTime=0,this.groupMTotalPeriodicTime=0,this.firedBeacons=new Set,this.lastObservedEntry=null,this.trackingTimeoutList={[k.Ik]:[],[k.VL]:[],[k.bw]:[],[k.gg]:[]},a.attachTracker(this,u.tY.moat),this.initialize()}}var F=i(772772);class H{attachTracker(e,t){this.trackers.set(t,e)}payloadCheck(e,t){let i=!0;const a=new Set([A.hW]),o=Object.keys(e),s=[];for(let n=0;n<o.length;n++){const t=o[n];void 0!==e[t]||a.has(t)||(s.push(t),i=!1)}return i||(0,n.L)({type:"BEACON_MISSING_KEY",payload:{action:t,missingKeys:s,payload:e}}),i}fire(e,t){const i={...this.commonDisplayAdPayload.metaData.beaconDebug||{},adSource:"S2S",ip:this.commonDisplayAdPayload.metaData.dfpParams.clientIp,s:this.adUuid,t:[],ignore:!1},o={};let s=!1;switch(e){case u.Au.AD_IMPRESSION:case u.Au.CLICK:case u.Au.TOUCH:case u.Au.MRC_VIEWABLE:case u.C7.FULL_VIEWABLE:case u.C7.INVIEW_50_15s:case u.C7.INVIEW_50_5s:case u.Au.UNLOAD:this.trackers.forEach(((n,r)=>{const{payload:c}=n.getPayload(e);var l;this.payloadCheck(c,t)&&(i.t.push(r),(0,a.v)().displayCommonTracking&&(null===(l=this.commonDisplayAdPayload.iasTeamId)||void 0===l?void 0:l.length)&&i.t.push(u.tY.ias),(0,a.v)().displayCommonTracking?o.event=c:o[u.tY.moat]=c,s=!0)}));break;case u.X9.GROUPM_VIEWABLE:case u.X9.PERIODIC_UPDATE:{const r=this.trackers.get(u.tY.moat);if(r){const{payload:c}=r.getPayload(e);var n;if(this.payloadCheck(c,t))i.t.push(u.tY.moat),(0,a.v)().displayCommonTracking&&(null===(n=this.commonDisplayAdPayload.iasTeamId)||void 0===n?void 0:n.length)&&i.t.push(u.tY.ias),(0,a.v)().displayCommonTracking?o.event=c:o[u.tY.moat]=c,s=!0}break}case u.Bs.AD_VIDEO_IMPRESSION:case u.Bs.AD_VIDEO_VIEWABLE:case u.Bs.AD_VIDEO_VIEWABLE_GM:case u.Bs.AD_VIDEO_QUARTILE:case u.Bs.AD_VIDEO_COMPLETE:case u.Bs.AD_VIDEO_CLICK:case u.Bs.AD_VIDEO_REMOVE:this.trackers.forEach(((t,a)=>{const{payload:n}=t.getPayload(e);i.t.push(a),o[u.tY.moat]=n,s=!0}))}if(!s)return;const r={mt:i,pl:o};v.Y2.sendBeacon({context:"displayWlmt",action:"ads",name:t,payload:r}),this.onBeacon&&this.onBeacon(r)}constructor(e,t,i,a){this.adUuid=e,this.commonDisplayAdPayload=t,this.trackingStates=i,this.onBeacon=a,this.trackers=new Map}}var Z=i(487287),Y=i(262430);const x=e=>{let{target:t,commonDisplayAdPayload:i,track3PEnable:l,onBeacon:d,dbg:m,root:h,moduleLocation:I,templateId:E,adsPerfMetrics:p}=e;const g=(0,a.v)(),f=(0,o.D)(),v=g.viewableBeaconFix,A={root:h,rootMargin:"0px",threshold:[u.G1,u.Rl,u.TY,(0,u.wf)()]},T=(0,c.useMemo)((()=>(e=>{const t={};return e&&(t.moat={adLoadedTime:0,isAdLarge:!1,viewabilityMRC:!1,groupMViewable:!1,totalMrcViewTime:0,totalFiftyPctContTime:0,totalHundredPctContTime:0,publicisFullInViewOTS:!1,fullInViewOTS:0,eventTypeCount:{AD_IMPRESSION:0,CLICK:0,MRC_VIEWABLE:0,GROUPM_VIEWABLE:0,PERIODIC_UPDATE:0,TOUCH:0,UNLOAD:0,AD_VIDEO_IMPRESSION:0,AD_VIDEO_QUARTILE:0,AD_VIDEO_COMPLETE:0,AD_VIDEO_VIEWABLE:0,AD_VIDEO_VIEWABLE_GM:0,AD_VIDEO_CLICK:0,AD_VIDEO_REMOVE:0}}),t})(l)),[l]),{0:y,1:C}=(0,c.useState)(t.current),D=(0,a.v)();(0,c.useEffect)((()=>{C(t.current)}),[t,C]);const L=(0,c.useMemo)((()=>(0,Z.P)(i)),[i]),V=(0,c.useRef)(new H(L,i,T,d)),_=(0,c.useRef)(null),{0:b,1:P}=(0,c.useState)(null);(0,c.useEffect)((()=>{l&&y&&!_.current&&((0,a.v)().moatRefactorEnable?_.current=new F.Z(y,i,T.moat,V.current,D,I):_.current=new W(y,i,T.moat,V.current,D,I),P(_.current))}),[D,I,i,y,l,T.moat,P]),(0,c.useEffect)((()=>()=>{_.current&&_.current.unmount()}),[]);const k=(0,c.useCallback)(((e,t,i)=>{(0,n.L)({payload:{state:t},type:"GLASS_3P_AD_UPDATE",meta:{stateChange:"".concat(e,":").concat(i),id:L}})}),[L]),O=(0,c.useCallback)((e=>{if(_.current&&l){_.current.getAllTrackers().forEach((t=>{t(e,_.current,k,I)}))}}),[I,l,k]);(0,s.P)(t,O,A,{root:h,dbg:!0,auxData:{adType:"display",displayAd:i,dbg:m}},v?[b]:[null]);const w=(0,c.useMemo)((()=>e=>{if(_.current&&l){_.current.getCommonTrackers().forEach((t=>{t("video",e,_.current,f,p||{},k)}))}}),[p,f,l,k]);(0,c.useEffect)((()=>((0,a.v)().ipBr1VideoDSPEnabled&&"VIDEO1"===E&&window.addEventListener("message",(e=>{try{if(e){var i;const a="string"===typeof e.data?JSON.parse(e.data):e.data;"svelte"===a.host&&a.id===(null===(i=t.current)||void 0===i?void 0:i.id)&&w(a)}}catch(a){(0,Y.cM)(["error","ads","brandboxvideo"],{type:"log",message:null===a||void 0===a?void 0:a.message})}})),()=>{window.removeEventListener("message",w)})),[w,t,E]),(0,r.x)(y,u.ml,w)}}}]);