"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17845],{834729:function(o,e,t){t.d(e,{g:function(){return a}});var n=t(258309);const a=()=>{var o,e,t;const a=null===(o=(0,n.S)())||void 0===o||null===(e=o.publicRuntimeConfig)||void 0===e||null===(t=e.ads)||void 0===t?void 0:t.host;let d=null!==a&&void 0!==a?a:"https://www.walmart.com";return d=window.location.origin,d}},450400:function(o,e,t){t.d(e,{Q9:function(){return m},TT:function(){return p},gI:function(){return v},lk:function(){return c},w0:function(){return u},yS:function(){return r}});var n=t(444714),a=t(828652),d=t(262430),i=t(576053);const l=["BrandAmplifierAd","BuyBoxAd","MarqueeDisplayAd","POV2DisplayAd","POV3DisplayAd","POV4DisplayAd","SkylineDisplayAd","SponsoredProductCarousel","DynamicAdContainer","TileDisplayAd","TileTakeOverDisplayAd"];const c=(o,e)=>{if(e){const e=-1===o.indexOf("?")?"":o.slice(o.indexOf("?"));return"/swag/graphql".concat(e)}return o},s=(o,e,t)=>o&&""!==o.trim()?o:e&&""!==e.trim()?e:t,r=(o,e,t,a)=>{var c,r,u,p,v,I,f,g,y,C,S,b,h,x,T,A,P,U,L,N;const w=(o=>{let e={adsContext:{},pageContext:{},adRequestComposite:{},storeId:"",stateCode:"",zipCode:"",lazy:"",type:""};for(const a of Object.values(o))if(n=a.type,l.includes(n)&&a.configs){var t;const o=a.configs,n=null===o||void 0===o?void 0:o.ad,d=null===o||void 0===o||null===(t=o._rawConfigs)||void 0===t?void 0:t.lazy;if("BuyBoxAd"===a.type&&(e.lazy=d,e.type=a.type),(null===d||void 0===d)&&n){const o=()=>m(a.type)?(o=>{let{clientCapabilities:e,...t}=o;return t})(n.adRequestComposite):n.adRequestComposite;e={adsContext:n.adsContext||{},pageContext:n.pageContext,adRequestComposite:o()||{},storeId:n.storeId,stateCode:n.stateCode,zipCode:n.zipCode,lazy:"",type:a.type};break}}var n;return e})(t),O=(null===a||void 0===a?void 0:a.pageId)||"",M=w.pageContext,R=(0,n.v)().defaultLocationStateCode,E=(0,n.v)().defaultLocationZipCode,B=(0,n.v)().defaultStoreId,_=(0,n.v)().ipBbLazyLoadingEnable,k=null===a||void 0===a||null===(c=a.pageMetadata)||void 0===c?void 0:c.location,D=s(w.storeId,null===k||void 0===k?void 0:k.storeId,B),V=s(w.stateCode,null===k||void 0===k?void 0:k.stateOrProvinceCode,R),X=s(w.zipCode,null===k||void 0===k?void 0:k.postalCode,E);_&&"item"===a.pageType&&"mobile"===a.platform&&(o=>{let{adParamsFromAtf:e,adsContext:t,defaultLocationStateCode:n,defaultLocationZipCode:a,defaultStoreId:i,finalLocation:l}=o;var c,s,r,u,p,v;(0,d.cM)(["info","ads","location"],{type:"log",name:"ads-common-param",message:"ads common param",adParamsFromAtf:e,adsCtxt:t,adsContextLocation:{stateCode:null===t||void 0===t||null===(c=t.pageMetadata)||void 0===c||null===(s=c.location)||void 0===s?void 0:s.stateOrProvinceCode,zipCode:null===t||void 0===t||null===(r=t.pageMetadata)||void 0===r||null===(u=r.location)||void 0===u?void 0:u.postalCode,storeId:null===t||void 0===t||null===(p=t.pageMetadata)||void 0===p||null===(v=p.location)||void 0===v?void 0:v.storeId},defaultValues:{stateCode:n,zipCode:a,storeId:i},finalLocation:l})})({adParamsFromAtf:w,adsContext:a,defaultLocationStateCode:R,defaultLocationZipCode:E,defaultStoreId:B,finalLocation:{storeId:D,stateCode:V,zipCode:X}});const{enableIpDupReqFix:G}=(0,n.v)();return{adRequestComposite:w.adRequestComposite,adsContext:w.adsContext,pageContext:M&&!(0,i.Q)(M)?M:null===a||void 0===a||null===(r=a.pageMetadata)||void 0===r?void 0:r.pageContext,pageId:O,pageType:e,platform:o?"MOBILE_WEB":"DESKTOP",tenant:"WM_GLASS",locationContext:{storeId:D,stateCode:V,zipCode:X,...G?{...(null===a||void 0===a||null===(u=a.pageMetadata)||void 0===u||null===(p=u.location)||void 0===p?void 0:p.accessType)?{accessType:null===a||void 0===a||null===(v=a.pageMetadata)||void 0===v||null===(I=v.location)||void 0===I?void 0:I.accessType}:{},...(null===a||void 0===a||null===(f=a.pageMetadata)||void 0===f||null===(g=f.location)||void 0===g?void 0:g.accessPointId)?{accessPointId:null===a||void 0===a||null===(y=a.pageMetadata)||void 0===y||null===(C=y.location)||void 0===C?void 0:C.accessPointId}:{},...(null===a||void 0===a||null===(S=a.pageMetadata)||void 0===S||null===(b=S.location)||void 0===b?void 0:b.spokeNodeId)?{spokeNodeId:null===a||void 0===a||null===(h=a.pageMetadata)||void 0===h||null===(x=h.location)||void 0===x?void 0:x.spokeNodeId}:{}}:{accessType:null===a||void 0===a||null===(T=a.pageMetadata)||void 0===T||null===(A=T.location)||void 0===A?void 0:A.accessType,accessPointId:null===a||void 0===a||null===(P=a.pageMetadata)||void 0===P||null===(U=P.location)||void 0===U?void 0:U.accessPointId,spokeNodeId:null===a||void 0===a||null===(L=a.pageMetadata)||void 0===L||null===(N=L.location)||void 0===N?void 0:N.spokeNodeId}}}},u=(o,e)=>{const t=o.type,d=o.configs._rawConfigs.adUuid;if((0,n.v)().enableAdsConfigInGql){const o=(0,a.M)();o&&(e.adRequestComposite={...e.adRequestComposite,adsConfig:o})}return{...e,...d&&{adRequestComposite:{...e.adRequestComposite,adUuid:d}},moduleConfigs:{moduleLocation:o.configs._rawConfigs.moduleLocation,lazy:o.configs._rawConfigs.lazy},moduleType:t}},p=o=>{let e={};try{e=JSON.parse(o)}catch(t){}return e},v=o=>o.endsWith("DisplayAd")||"TriplePack"===o||"PrismTriplePack"===o||"AdjustableBanner"===o||"PrismAdjustableBanner"===o||"GridPOVBanners"===o||"AdjustableCardCarousel"===o||"PrismAdjustableCardCarousel"===o,m=o=>"SponsoredProductCarousel"===o||"SponsoredVideoAd"===o||"BuyBoxAd"===o||"BrandAmplifierAd"===o},828652:function(o,e,t){t.d(e,{M:function(){return d}});var n=t(641869),a=t(568166);const d=()=>{const o=(0,n.ej)(a.R.ADSCONFIG)?(0,n.ej)(a.R.ADSCONFIG):null;try{return JSON.parse(null!==o&&void 0!==o?o:"{}")}catch(e){return{}}}},204417:function(o,e,t){t.d(e,{$t:function(){return u},Fh:function(){return v},I9:function(){return f},K_:function(){return p},eT:function(){return S},h5:function(){return y},iT:function(){return h},jg:function(){return r},o6:function(){return m}});var n=t(736999),a=t(444714),d=t(834729),i=t(986803),l=t(570018),c=t(58919),s=t(110976);const r=o=>{var e;return o&&o.length>0?null===(e=o[0])||void 0===e?void 0:e.products:[]},u=o=>{var e;return o&&o.length>0?null===(e=o[0])||void 0===e?void 0:e.logo:{}},p=(o,e,t,n)=>{const{brands:d,lifestyleStr:i,isVideoAd:s}=(0,c.y_)(e,o.pageType);let{ad:{placementId:r,taxonomy:u}}=(0,l.B0)(o,e,t);const p=(0,l.NZ)(o,e,n),v=d&&d.length>0,m="".concat(p.ad.placementId).concat(i),{searchGenAIProps:I}=o,f=null===I||void 0===I?void 0:I.pagesource;return r=s?"sv".concat(r.slice(2)):r,r=(0,a.v)().spGenAiSearchEnable&&"GEN_AI"===f&&s?"".concat(r).concat(null===I||void 0===I?void 0:I.exploreAll):b(r,s,null===t||void 0===t?void 0:t.isModularSearch,null===t||void 0===t?void 0:t.modularMeta),u=v?p.ad.taxonomy:u,{placementId:v?m:r,taxonomy:u}},v=(o,e,t)=>{let{ad:n,indexNo:a,eventType:d}=e;var i,c,s;const r=(null===n||void 0===n||null===(i=n.adContent)||void 0===i?void 0:i.data)||{},{videos:u=[]}=r,p=(null===u||void 0===u||null===(c=u[0])||void 0===c||null===(s=c.products)||void 0===s?void 0:s[0])||{},{ad:{placementId:v,taxonomy:m}}=(0,l.B0)(o,n,t);let I=v;if((null===t||void 0===t?void 0:t.isModularSearch)&&(null===t||void 0===t?void 0:t.modularMeta)){const o=JSON.parse(null===t||void 0===t?void 0:t.modularMeta).interpretations[0],e="".concat(o.type,"-").concat(o.sub_type);I="".concat(v).concat(e)}return f(o,p,{indexNo:a,eventType:d,placementId:I,taxonomy:m})},m=(o,e)=>{let{ad:t,indexNo:n,eventType:a}=e;var d,i;const{products:l=[]}=(null===t||void 0===t||null===(d=t.adContent)||void 0===d?void 0:d.data)||{},c=(null===t||void 0===t||null===(i=t.adContent)||void 0===i?void 0:i.data)||{},{brands:s=[]}=c,u=r(s);return f(o,l&&l[n]||u&&u[n],{indexNo:n,eventType:a,...p(o,t)})};function I(o,e){return(0,a.v)().adSpBuyNowBeaconEnable?e?"0":o===s.Xe.CLICK||o===s.Xe.ATC||o===s.Xe.QUICKSHOPFIRST||o===s.Xe.CLIP||o===s.Xe.BUYNOW||o===s.Xe.PREORDER?"1":"0":o===s.Xe.CLICK||o===s.Xe.ATC||o===s.Xe.QUICKSHOPFIRST||o===s.Xe.CLIP||o===s.Xe.PREORDER?"1":"0"}const f=(o,e,t)=>{let{eventType:l,taxonomy:r,placementId:u,indexNo:p,isBeaconSent:v}=t;var m;const f="".concat((0,d.g)()).concat(null===e||void 0===e?void 0:e.canonicalUrl),g="".concat((0,d.g)(),"/ip//").concat(null===e||void 0===e?void 0:e.usItemId);let y=(null===e||void 0===e?void 0:e.canonicalUrl)?f:g;(0,a.v)().enableSponsoredRedirectParam&&(y=(0,c.KL)(y));const C=null===e||void 0===e||null===(m=e.sponsoredProduct)||void 0===m?void 0:m.clickBeacon,S=(null===e||void 0===e?void 0:e.canonicalUrl)&&(null===e||void 0===e?void 0:e.canonicalUrl.split("?").pop());if(C){const t=new URL(C),d=t.origin,m=t.pathname,f=new URLSearchParams(t.search),g=f.get("bkt"),h=(0,c.cb)(o),{specificity:x,specificityScore:T}=(0,c.Hs)(o);var b;const A={bt:I(l,v),eventST:l||"",plmt:"".concat(u),pos:"".concat(p+1),tax:r,rdf:l===s.Xe.CLICK?"1":"0",rd:y,adUid:f.get("adUid")||"",mloc:f.get("mloc")||"",pltfm:o.platform,pgId:null!==(b=o.pageId)&&void 0!==b?b:"",pt:o.pageType,spQs:f.get("spQs")||"",storeId:f.get("storeId")||"",specificity:x,specificityScore:T,...(0,a.v)().spIbottaEnable&&{couponState:(0,c.AH)(e)},...g&&{bkt:g||""},...h};return l!==s.Xe.CLIP&&l!==s.Xe.ATC&&l!==s.Xe.INCREASEQUANTITY&&l!==s.Xe.DECREASEQUANTITY&&l!==s.Xe.QUICKSHOPFIRST&&l!==s.Xe.QUICKSHOPANOTHER&&l!==s.Xe.BUYNOW&&l!==s.Xe.PREORDER||(0,i.ZR)("".concat(d).concat(m,"?").concat(n.stringify(A)),!0),(null===e||void 0===e?void 0:e.canonicalUrl)?"".concat(d).concat(m,"?").concat(n.stringify(A),"&").concat(S):"".concat(d).concat(m,"?").concat(n.stringify(A))}return""};function g(o){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(o&&e&&!(0,a.v)().sbaLogoClickEventFixEnable){const e=o.split("|");return Array.isArray(e)&&e.length>2?"".concat(e[0],"|").concat(e[1],"~"):o}return o||""}const y=(o,e,t,n)=>{const a=(0,c.nX)(t,o.pageType);return e.map(((e,d)=>({...e,externalInfoUrl:f(o,e,{...p(o,t,n),indexNo:d+("SponsoredVideos"===(null===a||void 0===a?void 0:a.__typename)?1:0),eventType:s.Xe.CLICK})})))};function C(o){const e=new URLSearchParams(o.baseUrl.search),t=e.get("bkt"),n=e.get("st"),a=e.get("et");var d;return{bt:I(o.eventType,o.isBeaconSent),eventST:o.eventType||"",plmt:o.placementId,pos:o.pos,tax:o.taxonomy,rdf:o.eventType===s.Xe.CLICK?"1":"0",rd:o.rdUrl,adUid:e.get("adUid")||"",mloc:e.get("mloc")||"",pltfm:o.adsContext.platform,pgId:null!==(d=o.adsContext.pageId)&&void 0!==d?d:"",pt:o.adsContext.pageType,spQs:e.get("spQs")||"",storeId:e.get("storeId")||"",...t&&{bkt:t||""},...n&&{st:n||""},...a&&{et:a||""}}}const S=(o,e,t,n,a,d)=>{var i,l,s;if(null===(null===a||void 0===a||null===(i=a.product)||void 0===i?void 0:i.sponsoredProduct))return;let r=(0,c.wC)(e,a,void 0,null===d||void 0===d?void 0:d.enableLineItemId);-1!==(null===d||void 0===d?void 0:d.index)&&(r=null===d||void 0===d?void 0:d.index);const u="SponsoredVideos"===(null===n||void 0===n||null===(l=n.adContent)||void 0===l||null===(s=l.data)||void 0===s?void 0:s.__typename);if(-1!==r){const a=e[r],{taxonomy:i,placementId:l}=p(o,n,d);f(o,a,{taxonomy:i,placementId:l,eventType:t,indexNo:u?r+1:r,isBeaconSent:null===d||void 0===d?void 0:d.isBeaconSent})}},b=(o,e,t,n)=>{let a=o;if(t&&n){const t=JSON.parse(n).interpretations[0],d="".concat(t.type,"-").concat(t.sub_type);a=e?"".concat(o,"~").concat(d):"".concat(o).concat(d)}return a},h=function(o,e){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],d=arguments.length>3?arguments[3]:void 0;if(!e)return"";const{brands:i,lifestyleStr:r}=(0,c.y_)(e,o.pageType);if(!i.length)return"";const p=u(i),{ad:{placementId:v,taxonomy:m}}=(0,l.NZ)(o,e,d),{logoClickTrackUrl:I}=p;if(!I)return"";let{featuredUrl:f}=p;(0,a.v)().enableSponsoredRedirectParam&&f&&(f=(0,c.KL)(f));const y=new URL(I),S=y.origin,b=y.pathname,h=new URLSearchParams(y.search),x={baseUrl:y,adsContext:o,eventType:s.Xe.CLICK,placementId:"".concat(v).concat(r),isBeaconSent:!1,pos:"1",rdUrl:f,taxonomy:m};let T=C(x);return T={...T,addlInfo:g(h.get("addlInfo"),t)},"".concat(S).concat(b,"?").concat(n.stringify(T))}},570018:function(o,e,t){t.d(e,{B0:function(){return f},D7:function(){return x},MI:function(){return A},NZ:function(){return h},_P:function(){return C},a1:function(){return g},gc:function(){return m},i8:function(){return P},je:function(){return v},ly:function(){return S},tQ:function(){return b},ui:function(){return y},vO:function(){return I}});var n=t(444714),a=t(195620),d=t(450400),i=t(441036),l=t(905197),c=t(262430),s=t(204417),r=t(58919),u=t(110976);const p={search:{top:"sb-search-top",middle:"sp-search-middle",bottom:"sp-search-bottom"},browse:{top:"sb-browse-top",middle:"sp-browse-middle",bottom:"sp-browse-bottom"},item:{top:"sp-item-top",middle:"sp-item-middle",bottom:"sp-item-bottom",car1:"sp-item-car1",car2:"sp-item-car2",tile1:"sp-item-tile1",tile2:"sp-item-tile2"},homepage:{top:"sp-homepage-p13n",middle:"sp-homepage-p13n",bottom:"sp-homepage-p13n"},thankYou:{top:"sp-thankyou-p13n",middle:"sp-thankyou-p13n",bottom:"sp-thankyou-p13n"},stockup:{middle:"sp-stockup-p13n"},myitems:{middle:"sp-myitems-p13n"},cart:{middle:"sp-cart-p13n"},pac:{middle:"sp-pac-p13n"},shop:{middle:"sp-shop-middle"},topic:{top:"sb-topic-top",middle:"sp-topic-middle",bottom:"sp-topic-bottom"}},v=(o,e)=>{let t="bottom";"top"!==e&&"middle"!==e&&"car1"!==e&&"car2"!==e&&"tile1"!==e&&"tile2"!==e||(t=e);const n=p[o];return n&&n[t]||"sp-search-bottom"},m=(o,e)=>{let{adsContext:t,adUid:a,cloud:d="",products:i,moduleInfo:l,carouselType:c="",placementTitle:s="",modularMeta:u="",isModularSearch:p}=e;var v;const{platform:m,pageId:I="",pageType:f,pageMetadata:g,pageNumber:y="",searchGenAIProps:C,mosaicPageNumber:S=""}=t;let b="";const h=null===C||void 0===C?void 0:C.pagesource;var x;(0,n.v)().spGenAiSearchEnable&&"GEN_AI"===h&&"sb-search-top"!==o&&"sp-search-bottom"!==o&&(b=null!==(x=null===C||void 0===C?void 0:C.exploreAll)&&void 0!==x?x:"");const T=(0,r.gk)(i,o);let A=s?"".concat(o,"~").concat(m).concat(b,"~").concat(s):"".concat(o,"~").concat(m).concat(b,"~");if(p&&u){const o=JSON.parse(u).interpretations[0],e="".concat(o.type,"-").concat(o.sub_type);A="".concat(A).concat(e)}const{min:P,max:U}=(0,r.pC)(t,T,o,c);var L;const N=null!==(L=null===g||void 0===g||null===(v=g.location)||void 0===v?void 0:v.storeId)&&void 0!==L?L:t.storeId,w=(0,r.V6)(t),O=(0,r.jg)(t),{specificity:M,specificityScore:R}=(0,r.Hs)(t);return{ad:{adUid:a,cloud:d,items:T,min:P,max:U,moduleInfo:null!==l&&void 0!==l?l:"",moduleLocation:o,numAdsShown:T.length,p13nItemsShown:[],pageContext:O,pageId:I,pageNumber:"".concat("mosaic"===s?S:y),pageType:f,placementId:A,platform:m,storeId:N,taxonomy:w,specificity:M,specificityScore:R}}},I=(o,e,t)=>{let n=o;if(t&&e)try{const t=JSON.parse(e);n=JSON.parse(JSON.stringify({moduleInfo:o,interpretations:t.interpretations,exact:t.exact}))}catch(a){(0,c.cM)(["error","ads","beacon"],{type:"log",name:"ads-modular-parsing",message:"failed to parse Modular search Interpretations"})}return n},f=function(o,e){let{moduleLocation:t,placementTitle:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};var a,d,i,c,s;const r=(null===e||void 0===e||null===(a=e.adContent)||void 0===a?void 0:a.data)||{},u=null===e||void 0===e||null===(d=e.adContent)||void 0===d?void 0:d.model,{adUuid:p="",products:I=[],moduleInfo:f}=r;let g=t||v(o.pageType,(null===e||void 0===e||null===(i=e.moduleConfigs)||void 0===i?void 0:i.moduleLocation)||"top");const y="SponsoredVideos"===(null===e||void 0===e||null===(c=e.adContent)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.__typename);if(y){const o="sv".concat(g.slice(2));l.nB.includes(o)&&(g=o)}return m(g,{adsContext:o,adUid:p||"",products:null!==I&&void 0!==I?I:[],moduleInfo:f,carouselType:u,placementTitle:n})},g=(o,e,t)=>{o.ad={...o.ad,eligible:e,pageViewUUID:t};return{context:u.IT,action:"ads",name:u.VG.ADS_ELIGIBILITY,payload:o}},y=(o,e,t,n,a,d)=>{const i=h(e,t),l="".concat(i.ad.placementId).concat(a);i.ad={...i.ad,placementId:l,eligible:o,pageViewUUID:n,lsi:d};return{context:u.IT,action:"ads",name:u.VG.ADS_ELIGIBILITY,payload:i}},C=(o,e,t,n,a,d,i)=>{var l,c;const s=t.placementTitle,r=t.platform,p=s?"".concat(o,"~").concat(r,"~").concat(s):"".concat(o,"~").concat(r);var v;const m=null!==(v=null===(l=t.pageMetadata)||void 0===l||null===(c=l.location)||void 0===c?void 0:c.storeId)&&void 0!==v?v:t.storeId,I={ad:{pageViewUUID:e,pageType:t.pageType,gicIntent:i?i.toLowerCase():null,platform:r,placementId:p,adUid:a||"",moduleLocation:o,storeId:m,moduleInfo:n,items:d?T(d):[],min:1,max:1}};return{context:u.IT,action:"ads",name:u.VG.ADS_ELIGIBILITY,payload:I}},S=(o,e,t,a,i,l,c)=>{const s={configs:{_rawConfigs:{moduleLocation:t.moduleLocation||"middle",lazy:t.lazy||"1000",adUuid:t.adUuid||""}},matchedTrigger:{zone:""},type:t.type||"SponsoredVideoAd"},r={data:{adUuid:t.adUuid}},p=(0,d.yS)(i,"SEARCH",{},e),v={adContent:r,adsContext:e,...(0,d.w0)(s,p)},m=b(e,v,{isProductOnly:!1,isMobile:i}),I=(0,n.v)().spModularSearchAdEnable;let f=t.moduleInfo,g=m.ad.placementId;if(l&&I){const o=JSON.parse(l),e=o.interpretations[0],t="".concat(e.type,"-").concat(e.sub_type);g="".concat(g).concat(t),f=JSON.parse(JSON.stringify({modularModuleInfo:f,interpretations:o.interpretations,exact:o.exact}))}m.ad={...m.ad,moduleInfo:f,placementId:g,eligible:o,pageViewUUID:a,gicIntent:c?c.toLowerCase():null};return{context:u.IT,action:"ads",name:u.VG.ADS_ELIGIBILITY,payload:m}},b=(o,e,t,a,d)=>{var l,c,s;const u=(null===e||void 0===e||null===(l=e.adContent)||void 0===l?void 0:l.data)||{},{adUuid:p="",videos:v=[],moduleInfo:I=""}=u,f=(null===v||void 0===v||null===(c=v[0])||void 0===c?void 0:c.products)||[],g=null===v||void 0===v||null===(s=v[0])||void 0===s?void 0:s.video,y="BuyBoxAd"===(null===e||void 0===e?void 0:e.moduleType)?"sv-".concat(o.pageType,"-top"):"sv-".concat(o.pageType,"-middle"),C=(0,r.cb)(o),S=(0,n.v)().spModularSearchAdEnable;let b=I;if(d&&S){const o=JSON.parse(d);b=JSON.parse(JSON.stringify({moduleInfo:I,interpretations:o.interpretations,exact:o.exact}))}var h,x;const T=f[0]?f.map((o=>({usItemId:null!==(h=o.usItemId||o.id)&&void 0!==h?h:"",sponsoredProduct:null!==(x=o.sponsoredProduct)&&void 0!==x?x:null}))):[{usItemId:"",sponsoredProduct:null}],A=m(y,{adsContext:o,adUid:p||"",products:T,moduleInfo:b,modularMeta:d,isModularSearch:S}),P="1001~1~".concat((null===g||void 0===g?void 0:g.spqs)||""),U=A.ad.items||[],L=[],N=[],w=(0,i.z)(o,(0,n.v)());if(U.length>=1)if(w){const o=(null===t||void 0===t?void 0:t.usItemId)?U.filter((o=>o.split("~")[0]===(null===t||void 0===t?void 0:t.usItemId))):U;L.push(...o),N.push(P),N.push(...U)}else{const o=U[0].split("~");o[1]="2";const e=o.join("~");L.push(e),N.push(P),N.push(e)}return{...A,ad:{...A.ad,items:(null===t||void 0===t?void 0:t.isProductOnly)?L:N,adUid:p||"",moduleInfo:b,numAdsShown:L.length,numAdsAvailable:U.length,...C,...a}}},h=(o,e,t)=>{var a,d,i,l,c,u;const{spSbaDataV1Enable:p,bpSbaDataV1Enable:v}=(0,n.v)();let m={};var I,g;p||v?m=null===e||void 0===e||null===(I=e.adContent)||void 0===I?void 0:I.dataV1:m=null===e||void 0===e||null===(g=e.adContent)||void 0===g?void 0:g.data;m||(m={});const{adUuid:y="",brands:C=[],moduleInfo:S=""}=m,b=(0,s.jg)(C),h=(0,s.$t)(C),{logoClickTrackUrl:x}=h,T=(0,r.gk)(b,"sb-search-top"),A=(0,r.cb)(o),{specificity:P,specificityScore:U}=(0,r.Hs)(o),L="browse"===o.pageType?null===(a=o.pageMetadata)||void 0===a||null===(d=a.pageContext)||void 0===d||null===(i=d.browseContext)||void 0===i?void 0:i.verticalId:null===(l=o.pageMetadata)||void 0===l||null===(c=l.pageContext)||void 0===c||null===(u=c.searchNormalize)||void 0===u?void 0:u.verticalId;let N="";if(x){const o=new URL(x);N=new URLSearchParams(o.search).get("spQs")}T.length>0&&T.unshift("1001~1~".concat(N||""));const w=f(o,e);let O=T.length;return(0,n.v)().SbaNumsAdShownFixEnable&&T.length>1&&(O=T.length-1),{...w,ad:{...w.ad,items:T,adUid:y||"",moduleInfo:S,numAdsShown:O,...(0,n.v)().spSbaNewBeaconAttributesEnable&&!isNaN(t)&&{verticalId:L,placementId:"".concat(w.ad.placementId,"UXVar").concat(t)},specificity:P,specificityScore:U,...A}}},x=(o,e,t,n)=>{if(!e)return o;const{adUuid:d,max:i,moduleInfo:l}=e,c=(0,a.D)(),s=(0,r.cb)(c);let u=o.ad.placementId,p=l;if(t&&n){const o=JSON.parse(n),e=o.interpretations[0],t="".concat(e.type,"-").concat(e.sub_type);u="".concat(u).concat(t),p=JSON.parse(JSON.stringify({moduleInfo:l,interpretations:o.interpretations,exact:o.exact}))}return{...o,ad:{...o.ad,max:i,moduleInfo:p,adUid:d,placementId:u,...s}}},T=o=>o.reduce(((o,e,t)=>{var n;e.sponsoredProduct&&o.push((0,r.qj)({usItemId:null!==(n=e.usItemId)&&void 0!==n?n:"",sponsoredProduct:e.sponsoredProduct},t));return o}),[]),A=o=>{let{adBeaconPayload:e,hasAds:t,items:n}=o;const d=T(n),i=(0,r.yG)(n,e.ad.moduleLocation),l=(0,a.D)(),c=(0,r.cb)(l);return{context:u.IT,action:u.om,name:t?u.VG.IMPRESSION:u.VG.NOT_AVAILABLE,payload:{...e,ad:{...e.ad,numAdsShown:d.length,items:d,p13nItemsShown:i,...c,brand:n.reduce(((o,e)=>(e.sponsoredProduct&&o.push(e.brand||""),o)),[]),sellerId:n.reduce(((o,e)=>(e.sponsoredProduct&&o.push(e.sellerId||""),o)),[])}}}},P=o=>{let{adBeaconPayload:e,item:t,index:n,items:d}=o;const i=(0,r.yG)(d,e.ad.moduleLocation),l=(0,a.D)(),c=(0,r.cb)(l);return t.sponsoredProduct?{context:u.IT,action:u.om,name:u.VG.IN_VIEW,payload:{...e,ad:{...e.ad,numAdsShown:1,p13nItemsShown:i,items:[(0,r.qj)({usItemId:null!==(s=t.usItemId)&&void 0!==s?s:"",sponsoredProduct:t.sponsoredProduct},n)],...c,brand:[(null===t||void 0===t?void 0:t.brand)||""],sellerId:[(null===t||void 0===t?void 0:t.sellerId)||""]}}}:null;var s}}}]);