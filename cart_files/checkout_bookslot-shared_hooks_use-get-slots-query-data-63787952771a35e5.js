"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[94692],{35165:function(e,n,t){t.r(n),t.d(n,{checkoutBy:function(){return S},decouplingEvergreenDeliverySla:function(){return J},decouplingEvergreenDeliverySlaMobile:function(){return ee},decouplingExpressDeliverySla:function(){return ne},decouplingExpressDeliverySlaMobile:function(){return te},decouplingExpressStaticRange:function(){return Q},decouplingInHomeTitle:function(){return q},evergreenDeliverySla:function(){return p},express:function(){return $},expressDelivery:function(){return u},expressDeliverySla:function(){return x},expressDeliverySlaHot:function(){return F},expressDiscount:function(){return L},expressPickup:function(){return K},expressReservationStaticRange:function(){return Y},expressStaticRange:function(){return X},formattedTime:function(){return W},freeDeliveryRsvnRedesign:function(){return H},freeDeliveryRsvnTitle:function(){return I},freeExpress:function(){return V},freeExpressDelivery:function(){return b},freePickupDelivery:function(){return v},freeWalmartPlusDelivery:function(){return g},holdReservation:function(){return P},holdReservationUntil:function(){return C},hotEvergreenDeliverySla:function(){return R},hotExpressDelivery:function(){return k},hotFreeDeliveryRsvnTitle:function(){return D},hotInHomeReservationTitle:function(){return _},hrOrLess:function(){return o},inHome:function(){return z},inHomeReservationTitle:function(){return E},inHomeRsvnTitleRedesign:function(){return U},minsOrLess:function(){return s},nearAddress:function(){return A},nextWeeklyDelivery:function(){return O},nextWeeklyPickup:function(){return M},pickUpAndDelivery:function(){return m},pickupDelivery:function(){return G},regularReservationTitle:function(){return f},regularRsvnTitleHot:function(){return Z},regularRsvnTitleRedesign:function(){return T},reservationExpired:function(){return j},slotDayLabel:function(){return B},today:function(){return c},tomorrow:function(){return y},unschdReservationTitle:function(){return h},wPlusWithInHome:function(){return N},weeklyNoReservation:function(){return w}});var i=t(626051),l=t(491288);const r=function(){var e=new Intl.DateTimeFormat("en-US",{hour:"numeric",hourCycle:"h12"});return function(n){return e.format(n)}}(),d=function(){var e=new Intl.DateTimeFormat("es-US",{hour:"numeric",hourCycle:"h12"});return function(n){return e.format(n)}}(),a=function(){var e=new Intl.DateTimeFormat("fr-CA",{hour:"numeric",hourCycle:"h23"});return function(n){return e.format(n)}}();const o=e=>e.hours+" hr or less",s=e=>e.minutes+" min or less",c=()=>"today",m=()=>"Reserve pickup or delivery",u=()=>"Express delivery in 2 hr or less",x=e=>"Express delivery in "+e.sla+" "+i.Ys(e.unit,{hour:"hr",minute:"min",other:""})+" or less",p=e=>i.Ys(e.slotType,{PICKUP:"Pickup",DELIVERY:"Delivery",other:""})+" in "+e.sla+" "+i.Ys(e.unit,{hour:"hr",minute:"min",other:""})+" or less",y=()=>"tomorrow",f=e=>i.Ys(e.slotType,{PICKUP:"Pickup",DELIVERY:"Delivery",other:""})+" "+e.day+", "+e.timeWindow,h=e=>i.Ys(e.slotType,{PICKUP:"Pickup",DELIVERY:"Delivery",other:""})+" "+e.day+" after "+e.time,E=e=>"InHome delivery "+e.day+", "+e.timeWindow,I=e=>"Free delivery "+e.day+", "+e.timeWindow,w=()=>"Reserve a pickup or delivery",g=()=>"Free delivery with Walmart+",b=()=>"Enjoy Express delivery free with W+ for a limited time",v=()=>"Reserve free pickup or delivery",N=()=>"Walmart+ with InHome",S=()=>"Check out by",L=()=>"For a limited time Members get $5 off Express Delivery!",V=()=>"For a limited time Members get a free Express Delivery",j=()=>"Your reservation has expired",P=()=>"We'll hold this reservation",C=()=>"We'll hold this reservation until",O=e=>"Your next delivery to "+e.addressLineOne+" is "+e.date,M=e=>"Next pickup at "+e.accessPointName+" is "+e.date,A=e=>"Near "+e.city+", "+e.state+" "+e.zipCode,B=e=>e.month+"/"+e.day,k=()=>"in 2 hr or less",F=e=>"in "+e.sla+" "+i.Ys(e.unit,{hour:"hr",minute:"min",other:""})+" or less",_=e=>e.day+", "+e.timeWindow,R=e=>e.day+", "+e.sla+" "+i.Ys(e.unit,{hour:"hr",minute:"min",other:""})+" or less",D=e=>e.day+", "+e.timeWindow,T=e=>i.Ys(e.slotType,{PICKUP:"Pickup",DELIVERY:"Delivery",other:""})+" "+e.day,W=e=>r(e.timeLabel),U=e=>"InHome delivery "+e.day,H=e=>"Free delivery "+e.day,X=e=>e.minimumSla+"-"+e.slaInMins+" min",Y=e=>"Express delivery in "+e.minimumSla+"-"+e.slaInMins+" min",K=e=>"Express pickup "+e.day+", "+e.timeWindow,G=e=>i.Ys(e.slotType,{PICKUP:"Pickup",DELIVERY:"Delivery",other:""}),z=()=>"InHome",q=e=>"InHome "+e.day,$=()=>"Express",Z=e=>e.day+", "+e.timeWindow,Q=e=>e.minimumSla+"-"+e.slaInMins+" "+i.Ys(e.isMobile,{true:"mins",other:"minutes"}),J=e=>e.sla+" "+i.Ys(e.unit,{hour:i.Ho(e.sla,0,l.en,{one:"hour",other:"hours"}),minute:i.Ho(e.sla,0,l.en,{one:"minute",other:"minutes"}),other:""})+" or less",ee=e=>e.sla+" "+i.Ys(e.unit,{hour:i.Ho(e.sla,0,l.en,{one:"hr",other:"hrs"}),minute:i.Ho(e.sla,0,l.en,{one:"min",other:"mins"}),other:""})+" or less",ne=e=>"Express "+e.sla+" "+i.Ys(e.unit,{hour:i.Ho(e.sla,0,l.en,{one:"hour",other:"hours"}),minute:i.Ho(e.sla,0,l.en,{one:"minute",other:"minutes"}),other:""})+" or less",te=e=>e.sla+" "+i.Ys(e.unit,{hour:i.Ho(e.sla,0,l.en,{one:"hr",other:"hrs"}),minute:i.Ho(e.sla,0,l.en,{one:"min",other:"mins"}),other:""})+" or less"},570592:function(e,n,t){t.d(n,{IX:function(){return i},Ot:function(){return d},bM:function(){return a},oZ:function(){return l}});const i="00000000-0000-0000-0000-000000000000";var l,r,d;!function(e){e.CXO_BST_DEFAULT="CXO_BST_DEFAULT",e.CXO_BST_EXPRESS_DEFAULT="CXO_BST_EXPRESS_DEFAULT",e.CXO_BST_EVERGREEN="CXO_BST_EVERGREEN",e.CXO_BST_EXPRESS="CXO_BST_EXPRESS",e.CXO_BST_REGULAR="CXO_BST_REGULAR",e.CXO_BST_UNSCHEDULED="CXO_BST_UNSCHEDULED",e.CXO_BST_INHOME_DELIVERY="CXO_BST_INHOME_DELIVERY",e.CXO_BST_FREE_DELIVERY="CXO_BST_FREE_DELIVERY",e.CXO_BST_RESERVE_PICK_DEL="CXO_BST_RESERVE_PICK_DEL",e.CXO_BST_WKLY_NO_RES="CXO_BST_WKLY_NO_RES",e.CXO_BST_WPLUS_FREE_DEL="CXO_BST_WPLUS_FREE_DEL",e.CXO_BST_WPLUS_EXPRESS="CXO_BST_WPLUS_EXPRESS",e.CXO_BST_WPLUS_FREE="CXO_BST_WPLUS_FREE",e.CXO_BST_WPLUS_INHOME="CXO_BST_WPLUS_INHOME"}(l||(l={})),function(e){e.CXO_BSST_POP_SPOKE="CXO_BSST_POP_SPOKE",e.CXO_BSST_INSTORE_PICKUP="CXO_BSST_INSTORE_PICKUP",e.CXO_BSST_DELIVERY="CXO_BSST_DELIVERY",e.CXO_BSST_WEEKLY_DELIVERY="CXO_BSST_WEEKLY_DELIVERY",e.CXO_BSST_WEEKLY_PICKUP="CXO_BSST_WEEKLY_PICKUP",e.CXO_BSST_RESERVATION_NEAR="CXO_BSST_RESERVATION_NEAR",e.CXO_BSST_WPLUS_DELIVERY="CXO_BSST_WPLUS_DELIVERY"}(r||(r={})),function(e){e.CXO_BSET_CHECKOUT_BY="CXO_BSET_CHECKOUT_BY",e.CXO_BSET_EXPRESS_DISCOUNT="CXO_BSET_EXPRESS_DISCOUNT",e.CXO_BSET_EXPRESS_FREE="CXO_BSET_EXPRESS_FREE",e.CXO_BSET_RESERVATION_EXPD="CXO_BSET_RESERVATION_EXPD",e.CXO_BSET_RES_UNSCHD="CXO_BSET_RES_UNSCHD",e.CXO_BSET_RESERVATION_SLA="CXO_BSET_RESERVATION_SLA"}(d||(d={}));const a=[{id:"",nodeAccessType:"DELIVERY_ADDRESS",fulfillmentType:"DELIVERY",cartFulfillmentOption:"DELIVERY",address:{addressLineOne:"",addressLineTwo:null,city:"",state:"",postalCode:""},timeZone:"UTC",displayName:"",assortmentStoreId:"",isExpressEligible:null}]},482527:function(e,n,t){t.d(n,{s:function(){return y}});var i=t(768230),l=t(954568),r=t(525214),d=t(512834),a=t(167439),o=t(351438),s=t(702802),c=t(512142),m=t(969538),u=t(570592),x=t(23001),p=t(678799);const y=e=>{let{cartFulfillmentOption:n,reservation:t,customQueryKey:y,maxAvailableSlotsCount:f,requestSource:h,fulfillmentOptionParam:E,queryFulfillment:I,initialCartId:w,startDate:g,isInstallWithLazyCartId:b,paginationInput:v,subscriptions:N,variant:S,mpDeliverySlots:L}=e;var V;const j=(0,i.Dv)(),P=(0,s.iC)(x.Vq,c.YL,l.Tg),{enableExpressSla:C,enableWalmartPlusFreeDiscountedExpress:O,enableLawnAndGarden:M,enableHolidayFreeExpressDelivery:A,enablePetRxManualRefill:B,enableItemLevelCheckout:k,enablePreferredStore:F,enableExpressUnavailableInShortcuts:_,enableOnDemandShifting:R,enableHolidayFreeExpressDeliveryOptIn:D}=P.shared.values||{},{enableDeliveryAddressFromSlotData:T,enableCartFulfillmentOption:W,enablePassCartIdAcidCheck:U,enableFulfillmentOptionURLParam:H,enableMultipleInhomeAddresses:X,enableInstaCartSlots:Y,enableAccSlotExpansion:K,enableColdChainExpansion:G,enableTempoBookslotSlotPromotionBanner:z,enableExpress6amBanner:q,enableMemberInfoFromCartCustomerContext:$}=P.bookslot.values||{},{enableVisionItems:Z,enableFulfillmentMajorAppliances:Q,enableFIGCartFulfillmentOption:J,enableBYOD:ee,enablePromiseDateRange:ne}=P.cart.values||{},te=(0,p.m)();let ie=(0,i.cF)();"ACC_SERVICE"===n||"SUBSCRIPTION"===S?ie=w:(U&&te||b)&&(ie=u.IX);const le=(0,i.EN)(),re={"x-o-in-home-slots":"true",...(W?{"x-o-default-slot-intent":"true"}:{})},de=(0,i.dt)(),ae="INSTALL"===n||"ACC_SERVICE"===n,oe=ae?"PICKUP":n,{router:se}=(0,o.g4)(),ce=null===(V=se.query)||void 0===V?void 0:V.ffGroupId,me=(0,r.Er)(J||!1,ae?d.T_.AutoCareCenter:ce,d.T_.SCGroup),ue=null===me||void 0===me?void 0:me.cartFulfillmentOption,xe=(e=>{let{reservation:n,cartFulfillmentOption:t,enableFulfillmentOptionURLParam:i,fulfillmentOptionParam:l,isBookslotFulfillmentOptionChanged:r,requestSource:d,enableCartFulfillmentOption:a,enableFIGCartFulfillmentOption:o,cartFIGFulfillmentOption:s}=e,c=t;return o?c=s:"ACC_SERVICE"===t?c=t:i&&l&&"INSTALL"!==t&&!r?c=l:!a||"INSTALL"===t||d||"SHIPPING"!==t&&(n||r)||(c=void 0),c})({enableCartFulfillmentOption:W,enableFulfillmentOptionURLParam:H,isBookslotFulfillmentOptionChanged:de,cartFulfillmentOption:n,fulfillmentOptionParam:E,requestSource:h,reservation:t,enableFIGCartFulfillmentOption:J,cartFIGFulfillmentOption:ue});return(0,m.useMemo)(()=>({variables:{cartId:ie,fulfillmentOption:oe,cartFulfillmentOption:xe,isGuest:!!j,isExpressSla:!!C,enableDeliveryAddressFromSlotData:!!T,enableWalmartPlusFreeDiscountedExpress:!!O,maxAvailableSlotsCount:f,requestSource:h,itemFulfillmentTypes:M?le:void 0,enableMultipleInhomeAddresses:X,enableCartCustomerContext:"ACC_SERVICE"!==n,enableInstaCartSlots:Y,startDate:g,enableAccSlotExpansion:K,enableColdChainExpansion:G,enableHolidayFreeExpressDelivery:A,enableExpressPricing:O||A,enablePromotionClaimStatus:D||R,enablePromotionType:z||R||D,enablePreferredStore:F,enableExpressUnavailableBanner:q||_,enableMemberInfoFromCartCustomerContext:$,...(v?{paginationInput:v}:{}),features:(0,a.N)({enableVisionItems:Z,enablePetRxManualRefill:B,enableItemLevelCheckout:k,enableFulfillmentMajorAppliances:Q,enableLocalTimeForACCSlot:"ACC_OIL_SERVICE"===S,enableBYOD:ee,enableHolidayFreeExpressDeliveryOptIn:D,enableOnDemandShifting:R,enablePromiseDateRange:ne}),subscriptions:N,...(L?{mpDeliverySlots:L}:{})},additionalHeaders:re,customQueryKey:y}),[ie,oe,j,n,T,O,W,K,A,z,D,R,Z,B,k,G,C,I,g,v,F,L,ce])}},481385:function(e,n,t){t.d(n,{w:function(){return l}});const i={type:"query",name:"getSlots",hash:"1ea109c8b4cb85b632f7d8184c322b3f15474019512f5ea8c9e5aeb820120701"},l=(e,n)=>{let{variables:t,additionalHeaders:l={},customQueryKey:r}=n;return{queryKey:[r||"get-slots",t],queryFn:()=>e.getGqlFetch("cecxo",e=>(n,t)=>(t&&Object.keys(l).forEach(e=>{t.headers[e]=l[e]}),e(n,t)))(i,t)}}},205953:function(e,n,t){t.d(n,{wM:function(){return b},w4:function(){return x},BS:function(){return p},K_:function(){return w},k2:function(){return I},Gm:function(){return g},sA:function(){return h},vk:function(){return f},$v:function(){return v},Dm:function(){return L},lm:function(){return N},at:function(){return u},nQ:function(){return E},ho:function(){return S}});var i=t(689221),l=t(262430),r=t(600385),d=t(570592),a=t(35165);var o=t(75480);const s=(e,n,t)=>Boolean((("DELIVERY_ADDRESS"===n||"PICKUP_CURBSIDE"===n||"PICKUP_INSTORE"===n)&&"DynamicExpressSlot"===e||c(e,n))&&t&&t>0),c=(e,n)=>Boolean("DRONE_DELIVERY"===n&&("DynamicExpressSlot"===e||"DroneDeliverySlot"===e)),m=e=>e.filter(e=>{let{isAvailable:n}=e;return n}).length>0,u=(e,n,t,i)=>{var l;if((null===(l=e[0])||void 0===l?void 0:l.startTime)&&!i)return e[0].startTime;const r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"UTC",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const[t,i,l]=n.split("-");if(!t||!i||!l)return n;const r=new Date(Date.UTC(Number(t),Number(i)-1,Number(l))),d=new Date(r.toLocaleString("en-US",{timeZone:"UTC"})),a=new Date(r.toLocaleString("en-US",{timeZone:e})),o=d.getTime()-a.getTime();return r.setTime(r.getTime()+o),r.toISOString()}(t,n);return r},x=function(e,n){let t,l,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"UTC";(0,r.nl)(e,d)?(t="Today",l="Today"):(t=(0,r.Yx)(e,d),l=(0,r.Yx)(e,d,"long"));let[,o,s]=n.split("-");s=parseInt(s,10).toString(),o=parseInt(o,10).toString();const c=(0,i.m)(a,"slotDayLabel",{day:s,month:o});return{dayOfWeek:t,dayOfWeekLabel:l,dateLabel:c}},p=(e,n,t)=>{const i=[];return e.forEach(e=>{const{day:l,slots:r,hasPharmacyRestrictedSlots:d}=e,a=u(r,l,n),{dayOfWeek:o,dayOfWeekLabel:s,dateLabel:c}=x(a,l,n);i.push({dayOfWeek:o,dayOfWeekLabel:s,dateLabel:c,id:l,isSelected:l===t,isAvailable:m(r),hasPharmacyRestrictedSlots:d})}),i},y=e=>{var n,t,i,l,r,d,a,o,s,c,m,u;let x=null;"slaInMins"in e&&(x=e.slaInMins);const p=e.price,y=p.total||{displayValue:"",value:void 0},f=y.value||0,{totalSavings:h,totalSavingsValue:E}=(I=null===(n=p.totalSavings)||void 0===n?void 0:n.displayValue,w=null===(t=p.totalSavings)||void 0===t?void 0:t.value,{totalSavings:I||"",totalSavingsValue:w||0});var I,w;return{fee:y.displayValue,feeValue:f,expressFee:(null===(i=p.expressFee)||void 0===i?void 0:i.displayValue)||"",baseFee:(null===(l=p.baseFee)||void 0===l?void 0:l.displayValue)||"",totalValue:f,memberBaseFee:(null===(r=p.memberBaseFee)||void 0===r?void 0:r.displayValue)||"",optedInTotal:(null===(d=p.optedInTotal)||void 0===d?void 0:d.displayValue)||"",memberExpressDiscount:(null===(a=p.memberExpressDiscount)||void 0===a?void 0:a.displayValue)||"",memberExpressDiscountValue:(null===(o=p.memberExpressDiscount)||void 0===o?void 0:o.value)||0,expressFeeValue:(null===(s=p.expressFee)||void 0===s?void 0:s.value)||0,baseExpressFee:(null===(c=p.baseExpressFee)||void 0===c?void 0:c.displayValue)||"",originaltotal:(null===(m=p.originaltotal)||void 0===m?void 0:m.displayValue)||"",originaltotalValue:(null===(u=p.originaltotal)||void 0===u?void 0:u.value)||0,totalSavings:h,totalSavingsValue:E,slaInMins:x}},f=(e,n,t,i)=>{const{startTime:l,endTime:d}=e;if(!n&&!l&&!d)throw new Error("startTime is required for slot");return l&&d?i?(0,r.Xw)(l,d,t,!0):"".concat(L(l,t),"-").concat(L(d,t)):""},h=function(e,n){let t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3?arguments[3]:void 0;var d;const{__typename:o,startTime:s,price:c,unscheduledHoldInDays:m,slotMetadata:u}=e;if(!u&&!t)throw new Error("startTime/slotMetadata/unscheduledHoldInDays are required for unscheduled pickup");if(!s||!m)throw new Error("startTime/unscheduledHoldInDays are required for unscheduled pickup");const x=(null===navigator||void 0===navigator?void 0:navigator.language)||"en-US",p=(0,r.nl)(s,n)?l?(0,i.m)(a,"today"):"today":(0,r.Yx)(s,n,void 0,l?x:void 0),y=(0,r._J)(s,n,!0),f=E(s);return{__typename:o,startTime:y,startDay:p,unScheduledPickupStartDate:f,fee:(null===(d=c.total)||void 0===d?void 0:d.displayValue)||"",unscheduledHoldInDays:m||null,slotMetadata:u||"",isUnscheduledPickUpSlot:!0}},E=e=>e.slice(0,10),I=(e,n,t)=>{const{__typename:i,id:l,startTime:d,endTime:a,slotMetadata:o,fulfillmentType:c,nodeAccessType:m}=e,u=s(i,m,e.slaInMins||0);if(!u&&(!d||!a))throw new Error("startTime/endTime are required for slot");return{id:l||"",startTime:d,endTime:a,fulfillmentType:c,slotMetadata:o||"",timeWindow:f(e,u,n,t),isExpressSlot:u,date:(0,r.dq)(d,n),dayId:d?E(d):a?E(a):""}},w=(e,n)=>({date:(0,r.dq)(e,n),dayId:E(e)}),g=(e,n)=>{const t=[];return Array.isArray(e)&&e.forEach(e=>{const{day:i,eachDaySlots:l,...r}=e,d=l.map(e=>((e,n,t)=>{var i;const{__typename:l,id:r,available:d,isAlcoholRestricted:a,isSelectable:c,fulfillmentType:m,nodeAccessType:u,price:x,slaInMins:p,sla:f,slotMetadata:h,slotExpiryTime:E="",maxItemAllowed:I,slotIndicator:w,startTime:g="",endTime:b="",isPrimary:v=!0,accessPointId:N,isPopular:S=!1,isEvergreen:L=!1,serviceType:V,ineligibleItemCount:j,serviceProvider:P=null,maxColdChainLimitReached:C=!1,maxColdChainItemLimit:O,pharmacyIneligibleItemCount:M,minimumSla:A}=e;if(!h)throw new Error("slotMetadata is required for slot");const B=s(l,u,p||0),k=(e=>"InHomeSlot"===e)(l),F=(0,o.Ib)({slaInMins:p,isExpressSlot:B,minimumSla:A,enableExpressStaticRange:t});return{__typename:l,slotDay:n,...y(e),id:r||"",isAvailable:d||!1,isAlcoholRestricted:a||!1,isSelected:!1,slotMetadata:h||"",isExpressSlot:B,isEvergreen:!!L,isInHomeSlot:k,maxItemAllowed:I,isSelectable:c||!1,slotExpiryTime:E,slotIndicator:w,totalValue:(null===(i=x.total)||void 0===i?void 0:i.value)||0,startTime:g,endTime:b,isPrimary:v,accessPointId:N,fulfillmentType:m,nodeAccessType:u,slaDisplayValue:null===f||void 0===f?void 0:f.displayValue,isPopular:S,serviceType:V,slaShortDisplayValue:F,ineligibleItemCount:j,serviceProvider:P,maxColdChainLimitReached:C,maxColdChainItemLimit:O,pharmacyIneligibleItemCount:M,minimumSla:A}})(e,i,n));t.push({...r,day:i,slots:d})}),t},b=e=>{var n;return null!==(n=null===e||void 0===e?void 0:e.timeZone)&&void 0!==n?n:""},v=(e,n,t,i,l)=>{const r=e.find(e=>{let{day:t}=e;return n===t});return((null===r||void 0===r?void 0:r.slots.filter(e=>e.isAvailable||!!i&&e.isPopular))||[]).map(e=>{const n=f(e,e.isExpressSlot,t,l);return{...e,timeWindow:n}})},N=(e,n)=>{const{assortmentStoreId:t,id:i,displayName:l,cartFulfillmentOption:r,fulfillmentType:d,address:a,timeZone:o,nodeAccessType:s,isExpressEligible:c}=e[0];if(!a)throw new Error("Access Point Address is required.");return{assortmentStoreId:t,id:i,displayName:l,cartFulfillmentOption:r,fulfillmentType:d,timeZone:o,address:{...a,postalCode:n(null===a||void 0===a?void 0:a.postalCode)},nodeAccessType:s,isExpressEligible:c}},S=(e,n,t,i,r,a)=>{var o,s,c,m,u,x,y,f;let E,v,S,L,V,j=[],P=[],C=[];const O=r?{...e.slots,accessPoints:(null===(o=e.slots)||void 0===o||null===(s=o.accessPoints)||void 0===s?void 0:s.length)?null===(c=e.slots)||void 0===c?void 0:c.accessPoints:d.bM}:e.slots;if(!O)throw new Error("No slot data");(null===(m=O.accessPoints)||void 0===m?void 0:m.length)||(0,l.cM)(["info","checkout","bookslot","getSlot query","empty_accessPoints"],{type:"log",message:O}),V=N(O.accessPoints,t);const M=b(V);j=g(O.slotDays,a),C=p(j,M,undefined);const A=O.customerLocationInfo,B=C.some(e=>e.isAvailable);return(null===(u=O.nextAvailableSlots)||void 0===u?void 0:u.unscheduledPickupSlot)&&(E=h(O.nextAvailableSlots.unscheduledPickupSlot,M,void 0,n)),(null===(x=O.nextAvailableSlots)||void 0===x?void 0:x.pickupSlot)&&(v=I(O.nextAvailableSlots.pickupSlot,M,i)),(null===(y=O.nextAvailableSlots)||void 0===y?void 0:y.deliverySlot)&&(S=I(O.nextAvailableSlots.deliverySlot,M,i)),P=((e,n)=>{if(!e[0])throw new Error("Slots AccessPoint is required");return e.map(e=>{const{assortmentStoreId:t,id:i,displayName:l,cartFulfillmentOption:r,fulfillmentType:d,address:a,timeZone:o,nodeAccessType:s,isExpressEligible:c}=e;if(!a)throw new Error("Access Point Address is required.");return{assortmentStoreId:t,id:i,displayName:l,cartFulfillmentOption:r,fulfillmentType:d,timeZone:o,address:{...a,postalCode:n(null===a||void 0===a?void 0:a.postalCode)},nodeAccessType:s,isExpressEligible:c}})})(O.accessPoints,t),V=N(O.accessPoints,t),(null===(f=O.nextAvailableSlots)||void 0===f?void 0:f.earliestPickupSlotTime)&&(L=w(O.nextAvailableSlots.earliestPickupSlotTime,M)),{accessPoint:V,days:C,guestReservationExtensionMessage:O.guestReservationExtensionMessage,isAnySlotsAvailable:B,nextDeliverySlot:S,nextPickupSlot:v,nextUnscheduledPickupSlot:E,slotDays:j,timeZone:M,earliestPickupSlotTime:L,allAccessPoints:P,cartCustomerContext:O.cartCustomerContext,scheduledEnabled:O.scheduledEnabled,hasFreeOfCostDeliverySlotsForWPlusUsers:O.hasFreeOfCostDeliverySlotsForWPlusUsers,customerLocationInfo:A,paginationData:O.paginationData,slotPromotionDetails:O.slotPromotionDetails}},L=(e,n)=>(0,i.m)(a,"formattedTime",{timeLabel:new Date((0,r.mr)(e,n))}).replace(/[\s.]+/g,"").toLowerCase()},75480:function(e,n,t){t.d(n,{Gx:function(){return a},Ib:function(){return d},RK:function(){return o},WC:function(){return r}});var i=t(689221),l=t(35165);const r=e=>{let{enableExpressStaticRange:n,minimumSla:t,slaInMins:i}=e;return!!(n&&i&&t&&t<i)},d=e=>{let{slaInMins:n,isExpressSlot:t,minimumSla:d,enableExpressStaticRange:a}=e;if(t&&n){return r({enableExpressStaticRange:a,minimumSla:d,slaInMins:n})?(0,i.m)(l,"expressStaticRange",{minimumSla:d||null,slaInMins:n}):n%60?(0,i.m)(l,"minsOrLess",{minutes:n}):(0,i.m)(l,"hrOrLess",{hours:n/60})}return""},a=e=>{let{slot:n,enableExpressStaticRange:t,expressSlotSla:i}=e;return r({enableExpressStaticRange:t,minimumSla:n.minimumSla||null,slaInMins:n.slaInMins})?l.expressStaticRange({minimumSla:n.minimumSla||null,slaInMins:n.slaInMins}):i},o=e=>{let{slot:n,enableExpressStaticRange:t}=e;return t?{isr:"DynamicExpressSlot"===n.__typename&&r({enableExpressStaticRange:t,minimumSla:n.minimumSla,slaInMins:n.slaInMins})?1:0}:{}}},41427:function(e,n,t){t.d(n,{D:function(){return a}});var i=t(23001),l=t(702802),r=t(283714),d=t(34349);const a=()=>{var e;const{router:n}=(0,r.tv)(),t=(0,l.iC)(i.Vq),{enableFulfillmentOptionURLParam:a}=(null===(e=t.bookslot)||void 0===e?void 0:e.values)||{};return a?(0,d.z)(null,null===n||void 0===n?void 0:n.query):void 0}},918681:function(e,n,t){t.d(n,{d:function(){return w}});var i=t(702802),l=t(262430),r=t(890003),d=t(585347),a=t(974810),o=t(666569),s=t(969538),c=t(23001),m=t(570592),u=t(481385),x=t(205953),p=t(807479),y=t(482527),f=t(678799);const h=(e,n,t)=>{let{cartId:h,cartFulfillmentOption:E,reservation:I,blockDelivery:w=!1,cacheTime:g=0,customQueryKey:b,maxAvailableSlotsCount:v,requestSource:N,enabled:S=!0,fulfillmentOptionParam:L,queryFulfillment:V,startDate:j,paginationInput:P,subscriptions:C,disableRefetchOnWindowFocus:O=!1,enableExpressStaticRange:M,showHoursAndMinutesInSlots:A,mpDeliverySlots:B}=e;const{zipCodeFormatter:k=a.y}=(0,s.useContext)(o.V),{0:F,1:_}=(0,s.useState)(!1),R=(0,i.iC)(c.Vq),D="INSTALL"===E&&h===m.IX,{enableUnauthorizedAccessToCartErrorFix:T,enablePassCartIdAcidCheck:W,enableLocalizedStringInBookSlot:U,enableHourMinutesSlots:H}=R.bookslot.values||{},X=(0,y.s)({cartFulfillmentOption:E,reservation:I,customQueryKey:b,maxAvailableSlotsCount:v,requestSource:N,fulfillmentOptionParam:L,queryFulfillment:V,initialCartId:h,startDate:j,isInstallWithLazyCartId:D,paginationInput:P,variant:t,subscriptions:C,mpDeliverySlots:B}),Y=(0,f.m)(),K=W&&Y,G=(0,r.Z)(),z=n||(0,u.w)(G,{...X,...(F&&{variables:{...X.variables,cartId:"ACC_SERVICE"===E?h:m.IX,enableCartCustomerContext:"ACC_SERVICE"!==E,startDate:j,paginationInput:P}})}),{data:q,error:$,isFetching:Z,refetch:Q}=(0,d.a)({...z,config:{cacheTime:g,enabled:!!h&&!w&&S,refetchOnWindowFocus:!O}});(0,s.useEffect)(()=>{(e=>{let{data:n,hasCidAndAcid:t,cartId:i,refetch:r,setRefetch:d,enableUnauthorizedAccessToCartErrorFix:a}=e;var o,s;const c=null===n||void 0===n||null===(o=n.errors)||void 0===o?void 0:o.length;var m;t&&(0,l.cM)(["info","checkout","bookslot","getSlot query",c?"hasCidAndAcidError":"hasCidAndAcid"],{type:"log",message:c?JSON.stringify(null===n||void 0===n?void 0:n.errors):"cartId:".concat(i)}),a&&(null===n||void 0===n||null===(s=n.errors)||void 0===s?void 0:s.length)&&((0,p.e)(n)&&!r?((0,l.cM)(["info","checkout","bookslot","getSlot query","unauthorized-error"],{type:"log",message:"cartId:".concat(i)}),d(!0)):r&&(null===n||void 0===n||null===(m=n.errors)||void 0===m?void 0:m.length)&&(0,l.cM)(["info","checkout","bookslot","getSlot query","unauthorized-error-on-refetch"],{type:"log",message:JSON.stringify(null===n||void 0===n?void 0:n.errors)}))})({cartId:h,data:q,enableUnauthorizedAccessToCartErrorFix:T,hasCidAndAcid:K,refetch:F,setRefetch:_})},[null===q||void 0===q?void 0:q.errors,K]);const J=(0,s.useMemo)(()=>{const e=null===q||void 0===q?void 0:q.data;if(null===e||void 0===e?void 0:e.slots)try{return((e,n)=>{if(!1===(null===n||void 0===n?void 0:n.expired)&&!1===(null===n||void 0===n?void 0:n.isUnscheduled)){var t,i,l,r;const a=null!==(r=null===(t=e.slots)||void 0===t?void 0:t.slotDays)&&void 0!==r?r:[],o=null===n||void 0===n||null===(i=n.reservedSlot)||void 0===i||null===(l=i.startTime)||void 0===l?void 0:l.slice(0,10),s=null===a||void 0===a?void 0:a.find(e=>e.day===o);if(s){var d;const e=null===(d=s.eachDaySlots)||void 0===d?void 0:d.find(e=>e.id===n.reservedSlot.id);e&&(e.available=!0)}}})(e,I),{parsedSlotsData:(0,x.ho)(e,!!U,k,H||A,!!C,M)}}catch(n){return{dataErrors:[n]}}else if(!Z&&!w)return{dataErrors:(null===q||void 0===q?void 0:q.errors)||[new Error("Empty data response")]};return{}},[q,I]),{parsedSlotsData:ee=null,dataErrors:ne=[]}=J;return{errors:[$,...ne].filter(e=>e),isFetching:Z,data:ee,retry:!ne.length&&F,refetch:Q}};var E=t(41427),I=t(371212);const w=(e,n)=>{let{cartId:t,cartFulfillmentOption:l,reservation:r,cacheTime:d,customQueryKey:a,maxAvailableSlotsCount:o,requestSource:m,enabled:u,queryFulfillment:x,startDate:p,paginationInput:y,variant:f,subscriptions:w,disableRefetchOnWindowFocus:g,enableExpressStaticRange:b,showHoursAndMinutesInSlots:v,mpDeliverySlots:N}=e;const S=(0,E.D)(),{blockDelivery:L}=(e=>{var n;const{0:t,1:l}=(0,s.useState)(!1),r=(0,I.Jr)(),{isCAandESPAddressesSame:d,isCAandESPAddressesDifferent:a}=(0,I.w2)(),o=null===(n=(0,i.iC)(c.Vq).bookslot.values)||void 0===n?void 0:n.enableWirelessPostpaid;return{blockAddressChange:o&&r&&d,blockDelivery:"DELIVERY"===e&&o&&r&&a,showPostpaidAlertModal:t,setShowPostpaidAlertModal:l}})(l),{data:V,errors:j,isFetching:P,retry:C,refetch:O}=h({cartId:t,cartFulfillmentOption:l,reservation:r,blockDelivery:L,cacheTime:d,customQueryKey:a,maxAvailableSlotsCount:o,requestSource:m,enabled:u,fulfillmentOptionParam:S,queryFulfillment:x,startDate:p,paginationInput:y,subscriptions:w,disableRefetchOnWindowFocus:g,enableExpressStaticRange:b,showHoursAndMinutesInSlots:v,mpDeliverySlots:N},n,f),M=V||{};return{accessPoint:M.accessPoint,allAccessPoints:M.allAccessPoints,days:M.days,errors:j,timeZone:M.timeZone,earliestPickupSlotTime:M.earliestPickupSlotTime,isAnySlotsAvailable:M.isAnySlotsAvailable||!1,nextDeliverySlot:M.nextDeliverySlot,nextPickupSlot:M.nextPickupSlot,nextUnscheduledPickupSlot:M.nextUnscheduledPickupSlot,slotDays:M.slotDays,isFetching:P,guestReservationExtensionMessage:M.guestReservationExtensionMessage,slotPromotionDetails:M.slotPromotionDetails,cartCustomerContext:M.cartCustomerContext,scheduledEnabled:M.scheduledEnabled,hasFreeOfCostDeliverySlotsForWPlusUsers:M.hasFreeOfCostDeliverySlotsForWPlusUsers||!1,customerLocationInfo:M.customerLocationInfo,paginationData:M.paginationData,retry:C,refetch:O}}},34349:function(e,n,t){t.d(n,{z:function(){return i}});const i=(e,n)=>{try{const t=n||(e=>{if(e)return new Proxy(new URLSearchParams(e),{get:(e,n)=>e.get(n)})})(e),i=(null===t||void 0===t?void 0:t.fulfillmentOption)?t.fulfillmentOption.toString().toUpperCase():void 0;return"DELIVERY"===i||"PICKUP"===i?i:void 0}catch(t){return}}}}]);